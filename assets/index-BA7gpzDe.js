(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Nh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nc={exports:{}},mi={},rc={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var es=Symbol.for("react.element"),Lh=Symbol.for("react.portal"),Dh=Symbol.for("react.fragment"),Uh=Symbol.for("react.strict_mode"),zh=Symbol.for("react.profiler"),Bh=Symbol.for("react.provider"),Mh=Symbol.for("react.context"),Fh=Symbol.for("react.forward_ref"),Wh=Symbol.for("react.suspense"),Vh=Symbol.for("react.memo"),Hh=Symbol.for("react.lazy"),wl=Symbol.iterator;function Kh(t){return t===null||typeof t!="object"?null:(t=wl&&t[wl]||t["@@iterator"],typeof t=="function"?t:null)}var sc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ic=Object.assign,oc={};function er(t,e,n){this.props=t,this.context=e,this.refs=oc,this.updater=n||sc}er.prototype.isReactComponent={};er.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};er.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ac(){}ac.prototype=er.prototype;function Sa(t,e,n){this.props=t,this.context=e,this.refs=oc,this.updater=n||sc}var ka=Sa.prototype=new ac;ka.constructor=Sa;ic(ka,er.prototype);ka.isPureReactComponent=!0;var _l=Array.isArray,lc=Object.prototype.hasOwnProperty,xa={current:null},uc={key:!0,ref:!0,__self:!0,__source:!0};function cc(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)lc.call(e,r)&&!uc.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:es,type:t,key:i,ref:o,props:s,_owner:xa.current}}function qh(t,e){return{$$typeof:es,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ba(t){return typeof t=="object"&&t!==null&&t.$$typeof===es}function Gh(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sl=/\/+/g;function Li(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Gh(""+t.key):e.toString(36)}function Ps(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case es:case Lh:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Li(o,0):r,_l(s)?(n="",t!=null&&(n=t.replace(Sl,"$&/")+"/"),Ps(s,e,n,"",function(u){return u})):s!=null&&(ba(s)&&(s=qh(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Sl,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",_l(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Li(i,a);o+=Ps(i,e,n,l,s)}else if(l=Kh(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Li(i,a++),o+=Ps(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function os(t,e,n){if(t==null)return t;var r=[],s=0;return Ps(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Jh(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var be={current:null},As={transition:null},Qh={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:As,ReactCurrentOwner:xa};function dc(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:os,forEach:function(t,e,n){os(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return os(t,function(){e++}),e},toArray:function(t){return os(t,function(e){return e})||[]},only:function(t){if(!ba(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};B.Component=er;B.Fragment=Dh;B.Profiler=zh;B.PureComponent=Sa;B.StrictMode=Uh;B.Suspense=Wh;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qh;B.act=dc;B.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ic({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=xa.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)lc.call(e,l)&&!uc.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:es,type:t.type,key:s,ref:i,props:r,_owner:o}};B.createContext=function(t){return t={$$typeof:Mh,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bh,_context:t},t.Consumer=t};B.createElement=cc;B.createFactory=function(t){var e=cc.bind(null,t);return e.type=t,e};B.createRef=function(){return{current:null}};B.forwardRef=function(t){return{$$typeof:Fh,render:t}};B.isValidElement=ba;B.lazy=function(t){return{$$typeof:Hh,_payload:{_status:-1,_result:t},_init:Jh}};B.memo=function(t,e){return{$$typeof:Vh,type:t,compare:e===void 0?null:e}};B.startTransition=function(t){var e=As.transition;As.transition={};try{t()}finally{As.transition=e}};B.unstable_act=dc;B.useCallback=function(t,e){return be.current.useCallback(t,e)};B.useContext=function(t){return be.current.useContext(t)};B.useDebugValue=function(){};B.useDeferredValue=function(t){return be.current.useDeferredValue(t)};B.useEffect=function(t,e){return be.current.useEffect(t,e)};B.useId=function(){return be.current.useId()};B.useImperativeHandle=function(t,e,n){return be.current.useImperativeHandle(t,e,n)};B.useInsertionEffect=function(t,e){return be.current.useInsertionEffect(t,e)};B.useLayoutEffect=function(t,e){return be.current.useLayoutEffect(t,e)};B.useMemo=function(t,e){return be.current.useMemo(t,e)};B.useReducer=function(t,e,n){return be.current.useReducer(t,e,n)};B.useRef=function(t){return be.current.useRef(t)};B.useState=function(t){return be.current.useState(t)};B.useSyncExternalStore=function(t,e,n){return be.current.useSyncExternalStore(t,e,n)};B.useTransition=function(){return be.current.useTransition()};B.version="18.3.1";rc.exports=B;var W=rc.exports;const Yh=Nh(W);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xh=W,Zh=Symbol.for("react.element"),ef=Symbol.for("react.fragment"),tf=Object.prototype.hasOwnProperty,nf=Xh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rf={key:!0,ref:!0,__self:!0,__source:!0};function hc(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tf.call(e,r)&&!rf.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Zh,type:t,key:i,ref:o,props:s,_owner:nf.current}}mi.Fragment=ef;mi.jsx=hc;mi.jsxs=hc;nc.exports=mi;var g=nc.exports,yo={},fc={exports:{}},Ue={},pc={exports:{}},gc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,$){var N=j.length;j.push($);e:for(;0<N;){var C=N-1>>>1,U=j[C];if(0<s(U,$))j[C]=$,j[N]=U,N=C;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var $=j[0],N=j.pop();if(N!==$){j[0]=N;e:for(var C=0,U=j.length,z=U>>>1;C<z;){var ne=2*(C+1)-1,Se=j[ne],ht=ne+1,Tt=j[ht];if(0>s(Se,N))ht<U&&0>s(Tt,Se)?(j[C]=Tt,j[ht]=N,C=ht):(j[C]=Se,j[ne]=N,C=ne);else if(ht<U&&0>s(Tt,N))j[C]=Tt,j[ht]=N,C=ht;else break e}}return $}function s(j,$){var N=j.sortIndex-$.sortIndex;return N!==0?N:j.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,m=!1,w=!1,_=!1,k=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(j){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=j)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function v(j){if(_=!1,p(j),!w)if(n(l)!==null)w=!0,Ge(E);else{var $=n(u);$!==null&&it(v,$.startTime-j)}}function E(j,$){w=!1,_&&(_=!1,y(x),x=-1),m=!0;var N=d;try{for(p($),h=n(l);h!==null&&(!(h.expirationTime>$)||j&&!F());){var C=h.callback;if(typeof C=="function"){h.callback=null,d=h.priorityLevel;var U=C(h.expirationTime<=$);$=t.unstable_now(),typeof U=="function"?h.callback=U:h===n(l)&&r(l),p($)}else r(l);h=n(l)}if(h!==null)var z=!0;else{var ne=n(u);ne!==null&&it(v,ne.startTime-$),z=!1}return z}finally{h=null,d=N,m=!1}}var S=!1,T=null,x=-1,D=5,R=-1;function F(){return!(t.unstable_now()-R<D)}function q(){if(T!==null){var j=t.unstable_now();R=j;var $=!0;try{$=T(!0,j)}finally{$?se():(S=!1,T=null)}}else S=!1}var se;if(typeof f=="function")se=function(){f(q)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,qe=Ke.port2;Ke.port1.onmessage=q,se=function(){qe.postMessage(null)}}else se=function(){k(q,0)};function Ge(j){T=j,S||(S=!0,se())}function it(j,$){x=k(function(){j(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,Ge(E))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(d){case 1:case 2:case 3:var $=3;break;default:$=d}var N=d;d=$;try{return j()}finally{d=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,$){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var N=d;d=j;try{return $()}finally{d=N}},t.unstable_scheduleCallback=function(j,$,N){var C=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?C+N:C):N=C,j){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=N+U,j={id:c++,callback:$,priorityLevel:j,startTime:N,expirationTime:U,sortIndex:-1},N>C?(j.sortIndex=N,e(u,j),n(l)===null&&j===n(u)&&(_?(y(x),x=-1):_=!0,it(v,N-C))):(j.sortIndex=U,e(l,j),w||m||(w=!0,Ge(E))),j},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(j){var $=d;return function(){var N=d;d=$;try{return j.apply(this,arguments)}finally{d=N}}}})(gc);pc.exports=gc;var sf=pc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var of=W,De=sf;function b(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mc=new Set,Or={};function pn(t,e){qn(t,e),qn(t+"Capture",e)}function qn(t,e){for(Or[t]=e,t=0;t<e.length;t++)mc.add(e[t])}var wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=Object.prototype.hasOwnProperty,af=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kl={},xl={};function lf(t){return vo.call(xl,t)?!0:vo.call(kl,t)?!1:af.test(t)?xl[t]=!0:(kl[t]=!0,!1)}function uf(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cf(t,e,n,r){if(e===null||typeof e>"u"||uf(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ee(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){me[t]=new Ee(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];me[e]=new Ee(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){me[t]=new Ee(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){me[t]=new Ee(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){me[t]=new Ee(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){me[t]=new Ee(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){me[t]=new Ee(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){me[t]=new Ee(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){me[t]=new Ee(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ea=/[\-:]([a-z])/g;function Ta(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ea,Ta);me[e]=new Ee(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ea,Ta);me[e]=new Ee(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ea,Ta);me[e]=new Ee(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){me[t]=new Ee(t,1,!1,t.toLowerCase(),null,!1,!1)});me.xlinkHref=new Ee("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){me[t]=new Ee(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ca(t,e,n,r){var s=me.hasOwnProperty(e)?me[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cf(e,n,s,r)&&(n=null),r||s===null?lf(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xt=of.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,as=Symbol.for("react.element"),Tn=Symbol.for("react.portal"),Cn=Symbol.for("react.fragment"),ja=Symbol.for("react.strict_mode"),wo=Symbol.for("react.profiler"),yc=Symbol.for("react.provider"),vc=Symbol.for("react.context"),Ra=Symbol.for("react.forward_ref"),_o=Symbol.for("react.suspense"),So=Symbol.for("react.suspense_list"),Oa=Symbol.for("react.memo"),jt=Symbol.for("react.lazy"),wc=Symbol.for("react.offscreen"),bl=Symbol.iterator;function sr(t){return t===null||typeof t!="object"?null:(t=bl&&t[bl]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Object.assign,Di;function fr(t){if(Di===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Di=e&&e[1]||""}return`
`+Di+t}var Ui=!1;function zi(t,e){if(!t||Ui)return"";Ui=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ui=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fr(t):""}function df(t){switch(t.tag){case 5:return fr(t.type);case 16:return fr("Lazy");case 13:return fr("Suspense");case 19:return fr("SuspenseList");case 0:case 2:case 15:return t=zi(t.type,!1),t;case 11:return t=zi(t.type.render,!1),t;case 1:return t=zi(t.type,!0),t;default:return""}}function ko(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cn:return"Fragment";case Tn:return"Portal";case wo:return"Profiler";case ja:return"StrictMode";case _o:return"Suspense";case So:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vc:return(t.displayName||"Context")+".Consumer";case yc:return(t._context.displayName||"Context")+".Provider";case Ra:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Oa:return e=t.displayName||null,e!==null?e:ko(t.type)||"Memo";case jt:e=t._payload,t=t._init;try{return ko(t(e))}catch{}}return null}function hf(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ko(e);case 8:return e===ja?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _c(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ff(t){var e=_c(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ls(t){t._valueTracker||(t._valueTracker=ff(t))}function Sc(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_c(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ws(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xo(t,e){var n=e.checked;return Z({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function El(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vt(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kc(t,e){e=e.checked,e!=null&&Ca(t,"checked",e,!1)}function bo(t,e){kc(t,e);var n=Vt(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Eo(t,e.type,n):e.hasOwnProperty("defaultValue")&&Eo(t,e.type,Vt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tl(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Eo(t,e,n){(e!=="number"||Ws(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pr=Array.isArray;function Bn(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vt(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function To(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(b(91));return Z({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cl(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(b(92));if(pr(n)){if(1<n.length)throw Error(b(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vt(n)}}function xc(t,e){var n=Vt(e.value),r=Vt(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jl(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bc(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Co(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bc(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var us,Ec=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(us=us||document.createElement("div"),us.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=us.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pf=["Webkit","ms","Moz","O"];Object.keys(wr).forEach(function(t){pf.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wr[e]=wr[t]})});function Tc(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wr.hasOwnProperty(t)&&wr[t]?(""+e).trim():e+"px"}function Cc(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Tc(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var gf=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jo(t,e){if(e){if(gf[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(b(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(b(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(b(61))}if(e.style!=null&&typeof e.style!="object")throw Error(b(62))}}function Ro(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oo=null;function Pa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Po=null,Mn=null,Fn=null;function Rl(t){if(t=rs(t)){if(typeof Po!="function")throw Error(b(280));var e=t.stateNode;e&&(e=Si(e),Po(t.stateNode,t.type,e))}}function jc(t){Mn?Fn?Fn.push(t):Fn=[t]:Mn=t}function Rc(){if(Mn){var t=Mn,e=Fn;if(Fn=Mn=null,Rl(t),e)for(t=0;t<e.length;t++)Rl(e[t])}}function Oc(t,e){return t(e)}function Pc(){}var Bi=!1;function Ac(t,e,n){if(Bi)return t(e,n);Bi=!0;try{return Oc(t,e,n)}finally{Bi=!1,(Mn!==null||Fn!==null)&&(Pc(),Rc())}}function Ar(t,e){var n=t.stateNode;if(n===null)return null;var r=Si(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(b(231,e,typeof n));return n}var Ao=!1;if(wt)try{var ir={};Object.defineProperty(ir,"passive",{get:function(){Ao=!0}}),window.addEventListener("test",ir,ir),window.removeEventListener("test",ir,ir)}catch{Ao=!1}function mf(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var _r=!1,Vs=null,Hs=!1,Io=null,yf={onError:function(t){_r=!0,Vs=t}};function vf(t,e,n,r,s,i,o,a,l){_r=!1,Vs=null,mf.apply(yf,arguments)}function wf(t,e,n,r,s,i,o,a,l){if(vf.apply(this,arguments),_r){if(_r){var u=Vs;_r=!1,Vs=null}else throw Error(b(198));Hs||(Hs=!0,Io=u)}}function gn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ic(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ol(t){if(gn(t)!==t)throw Error(b(188))}function _f(t){var e=t.alternate;if(!e){if(e=gn(t),e===null)throw Error(b(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ol(s),t;if(i===r)return Ol(s),e;i=i.sibling}throw Error(b(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(b(189))}}if(n.alternate!==r)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?t:e}function $c(t){return t=_f(t),t!==null?Nc(t):null}function Nc(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Nc(t);if(e!==null)return e;t=t.sibling}return null}var Lc=De.unstable_scheduleCallback,Pl=De.unstable_cancelCallback,Sf=De.unstable_shouldYield,kf=De.unstable_requestPaint,re=De.unstable_now,xf=De.unstable_getCurrentPriorityLevel,Aa=De.unstable_ImmediatePriority,Dc=De.unstable_UserBlockingPriority,Ks=De.unstable_NormalPriority,bf=De.unstable_LowPriority,Uc=De.unstable_IdlePriority,yi=null,ct=null;function Ef(t){if(ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(yi,t,void 0,(t.current.flags&128)===128)}catch{}}var nt=Math.clz32?Math.clz32:jf,Tf=Math.log,Cf=Math.LN2;function jf(t){return t>>>=0,t===0?32:31-(Tf(t)/Cf|0)|0}var cs=64,ds=4194304;function gr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=gr(a):(i&=o,i!==0&&(r=gr(i)))}else o=n&~s,o!==0?r=gr(o):i!==0&&(r=gr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nt(e),s=1<<n,r|=t[n],e&=~s;return r}function Rf(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Of(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-nt(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=Rf(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function $o(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zc(){var t=cs;return cs<<=1,!(cs&4194240)&&(cs=64),t}function Mi(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ts(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nt(e),t[e]=n}function Pf(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-nt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ia(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-nt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var V=0;function Bc(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Mc,$a,Fc,Wc,Vc,No=!1,hs=[],Lt=null,Dt=null,Ut=null,Ir=new Map,$r=new Map,Pt=[],Af="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Al(t,e){switch(t){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":Ir.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$r.delete(e.pointerId)}}function or(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=rs(e),e!==null&&$a(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function If(t,e,n,r,s){switch(e){case"focusin":return Lt=or(Lt,t,e,n,r,s),!0;case"dragenter":return Dt=or(Dt,t,e,n,r,s),!0;case"mouseover":return Ut=or(Ut,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ir.set(i,or(Ir.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,$r.set(i,or($r.get(i)||null,t,e,n,r,s)),!0}return!1}function Hc(t){var e=nn(t.target);if(e!==null){var n=gn(e);if(n!==null){if(e=n.tag,e===13){if(e=Ic(n),e!==null){t.blockedOn=e,Vc(t.priority,function(){Fc(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Is(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Oo=r,n.target.dispatchEvent(r),Oo=null}else return e=rs(n),e!==null&&$a(e),t.blockedOn=n,!1;e.shift()}return!0}function Il(t,e,n){Is(t)&&n.delete(e)}function $f(){No=!1,Lt!==null&&Is(Lt)&&(Lt=null),Dt!==null&&Is(Dt)&&(Dt=null),Ut!==null&&Is(Ut)&&(Ut=null),Ir.forEach(Il),$r.forEach(Il)}function ar(t,e){t.blockedOn===e&&(t.blockedOn=null,No||(No=!0,De.unstable_scheduleCallback(De.unstable_NormalPriority,$f)))}function Nr(t){function e(s){return ar(s,t)}if(0<hs.length){ar(hs[0],t);for(var n=1;n<hs.length;n++){var r=hs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Lt!==null&&ar(Lt,t),Dt!==null&&ar(Dt,t),Ut!==null&&ar(Ut,t),Ir.forEach(e),$r.forEach(e),n=0;n<Pt.length;n++)r=Pt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pt.length&&(n=Pt[0],n.blockedOn===null);)Hc(n),n.blockedOn===null&&Pt.shift()}var Wn=xt.ReactCurrentBatchConfig,Gs=!0;function Nf(t,e,n,r){var s=V,i=Wn.transition;Wn.transition=null;try{V=1,Na(t,e,n,r)}finally{V=s,Wn.transition=i}}function Lf(t,e,n,r){var s=V,i=Wn.transition;Wn.transition=null;try{V=4,Na(t,e,n,r)}finally{V=s,Wn.transition=i}}function Na(t,e,n,r){if(Gs){var s=Lo(t,e,n,r);if(s===null)Yi(t,e,r,Js,n),Al(t,r);else if(If(s,t,e,n,r))r.stopPropagation();else if(Al(t,r),e&4&&-1<Af.indexOf(t)){for(;s!==null;){var i=rs(s);if(i!==null&&Mc(i),i=Lo(t,e,n,r),i===null&&Yi(t,e,r,Js,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yi(t,e,r,null,n)}}var Js=null;function Lo(t,e,n,r){if(Js=null,t=Pa(r),t=nn(t),t!==null)if(e=gn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ic(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Js=t,null}function Kc(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xf()){case Aa:return 1;case Dc:return 4;case Ks:case bf:return 16;case Uc:return 536870912;default:return 16}default:return 16}}var $t=null,La=null,$s=null;function qc(){if($s)return $s;var t,e=La,n=e.length,r,s="value"in $t?$t.value:$t.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return $s=s.slice(t,1<r?1-r:void 0)}function Ns(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fs(){return!0}function $l(){return!1}function ze(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fs:$l,this.isPropagationStopped=$l,this}return Z(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),e}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Da=ze(tr),ns=Z({},tr,{view:0,detail:0}),Df=ze(ns),Fi,Wi,lr,vi=Z({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ua,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==lr&&(lr&&t.type==="mousemove"?(Fi=t.screenX-lr.screenX,Wi=t.screenY-lr.screenY):Wi=Fi=0,lr=t),Fi)},movementY:function(t){return"movementY"in t?t.movementY:Wi}}),Nl=ze(vi),Uf=Z({},vi,{dataTransfer:0}),zf=ze(Uf),Bf=Z({},ns,{relatedTarget:0}),Vi=ze(Bf),Mf=Z({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ff=ze(Mf),Wf=Z({},tr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vf=ze(Wf),Hf=Z({},tr,{data:0}),Ll=ze(Hf),Kf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jf(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Gf[t])?!!e[t]:!1}function Ua(){return Jf}var Qf=Z({},ns,{key:function(t){if(t.key){var e=Kf[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ns(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qf[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ua,charCode:function(t){return t.type==="keypress"?Ns(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ns(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yf=ze(Qf),Xf=Z({},vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dl=ze(Xf),Zf=Z({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ua}),ep=ze(Zf),tp=Z({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),np=ze(tp),rp=Z({},vi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sp=ze(rp),ip=[9,13,27,32],za=wt&&"CompositionEvent"in window,Sr=null;wt&&"documentMode"in document&&(Sr=document.documentMode);var op=wt&&"TextEvent"in window&&!Sr,Gc=wt&&(!za||Sr&&8<Sr&&11>=Sr),Ul=" ",zl=!1;function Jc(t,e){switch(t){case"keyup":return ip.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qc(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jn=!1;function ap(t,e){switch(t){case"compositionend":return Qc(e);case"keypress":return e.which!==32?null:(zl=!0,Ul);case"textInput":return t=e.data,t===Ul&&zl?null:t;default:return null}}function lp(t,e){if(jn)return t==="compositionend"||!za&&Jc(t,e)?(t=qc(),$s=La=$t=null,jn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gc&&e.locale!=="ko"?null:e.data;default:return null}}var up={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!up[t.type]:e==="textarea"}function Yc(t,e,n,r){jc(r),e=Qs(e,"onChange"),0<e.length&&(n=new Da("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var kr=null,Lr=null;function cp(t){ld(t,0)}function wi(t){var e=Pn(t);if(Sc(e))return t}function dp(t,e){if(t==="change")return e}var Xc=!1;if(wt){var Hi;if(wt){var Ki="oninput"in document;if(!Ki){var Ml=document.createElement("div");Ml.setAttribute("oninput","return;"),Ki=typeof Ml.oninput=="function"}Hi=Ki}else Hi=!1;Xc=Hi&&(!document.documentMode||9<document.documentMode)}function Fl(){kr&&(kr.detachEvent("onpropertychange",Zc),Lr=kr=null)}function Zc(t){if(t.propertyName==="value"&&wi(Lr)){var e=[];Yc(e,Lr,t,Pa(t)),Ac(cp,e)}}function hp(t,e,n){t==="focusin"?(Fl(),kr=e,Lr=n,kr.attachEvent("onpropertychange",Zc)):t==="focusout"&&Fl()}function fp(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wi(Lr)}function pp(t,e){if(t==="click")return wi(e)}function gp(t,e){if(t==="input"||t==="change")return wi(e)}function mp(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var st=typeof Object.is=="function"?Object.is:mp;function Dr(t,e){if(st(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!vo.call(e,s)||!st(t[s],e[s]))return!1}return!0}function Wl(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vl(t,e){var n=Wl(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wl(n)}}function ed(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ed(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function td(){for(var t=window,e=Ws();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ws(t.document)}return e}function Ba(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yp(t){var e=td(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ed(n.ownerDocument.documentElement,n)){if(r!==null&&Ba(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Vl(n,i);var o=Vl(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vp=wt&&"documentMode"in document&&11>=document.documentMode,Rn=null,Do=null,xr=null,Uo=!1;function Hl(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uo||Rn==null||Rn!==Ws(r)||(r=Rn,"selectionStart"in r&&Ba(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xr&&Dr(xr,r)||(xr=r,r=Qs(Do,"onSelect"),0<r.length&&(e=new Da("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rn)))}function ps(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var On={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionend:ps("Transition","TransitionEnd")},qi={},nd={};wt&&(nd=document.createElement("div").style,"AnimationEvent"in window||(delete On.animationend.animation,delete On.animationiteration.animation,delete On.animationstart.animation),"TransitionEvent"in window||delete On.transitionend.transition);function _i(t){if(qi[t])return qi[t];if(!On[t])return t;var e=On[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nd)return qi[t]=e[n];return t}var rd=_i("animationend"),sd=_i("animationiteration"),id=_i("animationstart"),od=_i("transitionend"),ad=new Map,Kl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kt(t,e){ad.set(t,e),pn(e,[t])}for(var Gi=0;Gi<Kl.length;Gi++){var Ji=Kl[Gi],wp=Ji.toLowerCase(),_p=Ji[0].toUpperCase()+Ji.slice(1);Kt(wp,"on"+_p)}Kt(rd,"onAnimationEnd");Kt(sd,"onAnimationIteration");Kt(id,"onAnimationStart");Kt("dblclick","onDoubleClick");Kt("focusin","onFocus");Kt("focusout","onBlur");Kt(od,"onTransitionEnd");qn("onMouseEnter",["mouseout","mouseover"]);qn("onMouseLeave",["mouseout","mouseover"]);qn("onPointerEnter",["pointerout","pointerover"]);qn("onPointerLeave",["pointerout","pointerover"]);pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pn("onBeforeInput",["compositionend","keypress","textInput","paste"]);pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sp=new Set("cancel close invalid load scroll toggle".split(" ").concat(mr));function ql(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wf(r,e,void 0,t),t.currentTarget=null}function ld(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;ql(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;ql(s,a,u),i=l}}}if(Hs)throw t=Io,Hs=!1,Io=null,t}function G(t,e){var n=e[Wo];n===void 0&&(n=e[Wo]=new Set);var r=t+"__bubble";n.has(r)||(ud(e,t,2,!1),n.add(r))}function Qi(t,e,n){var r=0;e&&(r|=4),ud(n,t,r,e)}var gs="_reactListening"+Math.random().toString(36).slice(2);function Ur(t){if(!t[gs]){t[gs]=!0,mc.forEach(function(n){n!=="selectionchange"&&(Sp.has(n)||Qi(n,!1,t),Qi(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gs]||(e[gs]=!0,Qi("selectionchange",!1,e))}}function ud(t,e,n,r){switch(Kc(e)){case 1:var s=Nf;break;case 4:s=Lf;break;default:s=Na}n=s.bind(null,e,n,t),s=void 0,!Ao||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Yi(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=nn(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Ac(function(){var u=i,c=Pa(n),h=[];e:{var d=ad.get(t);if(d!==void 0){var m=Da,w=t;switch(t){case"keypress":if(Ns(n)===0)break e;case"keydown":case"keyup":m=Yf;break;case"focusin":w="focus",m=Vi;break;case"focusout":w="blur",m=Vi;break;case"beforeblur":case"afterblur":m=Vi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Nl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=zf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=ep;break;case rd:case sd:case id:m=Ff;break;case od:m=np;break;case"scroll":m=Df;break;case"wheel":m=sp;break;case"copy":case"cut":case"paste":m=Vf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Dl}var _=(e&4)!==0,k=!_&&t==="scroll",y=_?d!==null?d+"Capture":null:d;_=[];for(var f=u,p;f!==null;){p=f;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,y!==null&&(v=Ar(f,y),v!=null&&_.push(zr(f,v,p)))),k)break;f=f.return}0<_.length&&(d=new m(d,w,null,n,c),h.push({event:d,listeners:_}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",d&&n!==Oo&&(w=n.relatedTarget||n.fromElement)&&(nn(w)||w[_t]))break e;if((m||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=u,w=w?nn(w):null,w!==null&&(k=gn(w),w!==k||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=u),m!==w)){if(_=Nl,v="onMouseLeave",y="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(_=Dl,v="onPointerLeave",y="onPointerEnter",f="pointer"),k=m==null?d:Pn(m),p=w==null?d:Pn(w),d=new _(v,f+"leave",m,n,c),d.target=k,d.relatedTarget=p,v=null,nn(c)===u&&(_=new _(y,f+"enter",w,n,c),_.target=p,_.relatedTarget=k,v=_),k=v,m&&w)t:{for(_=m,y=w,f=0,p=_;p;p=mn(p))f++;for(p=0,v=y;v;v=mn(v))p++;for(;0<f-p;)_=mn(_),f--;for(;0<p-f;)y=mn(y),p--;for(;f--;){if(_===y||y!==null&&_===y.alternate)break t;_=mn(_),y=mn(y)}_=null}else _=null;m!==null&&Gl(h,d,m,_,!1),w!==null&&k!==null&&Gl(h,k,w,_,!0)}}e:{if(d=u?Pn(u):window,m=d.nodeName&&d.nodeName.toLowerCase(),m==="select"||m==="input"&&d.type==="file")var E=dp;else if(Bl(d))if(Xc)E=gp;else{E=fp;var S=hp}else(m=d.nodeName)&&m.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=pp);if(E&&(E=E(t,u))){Yc(h,E,n,c);break e}S&&S(t,d,u),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&Eo(d,"number",d.value)}switch(S=u?Pn(u):window,t){case"focusin":(Bl(S)||S.contentEditable==="true")&&(Rn=S,Do=u,xr=null);break;case"focusout":xr=Do=Rn=null;break;case"mousedown":Uo=!0;break;case"contextmenu":case"mouseup":case"dragend":Uo=!1,Hl(h,n,c);break;case"selectionchange":if(vp)break;case"keydown":case"keyup":Hl(h,n,c)}var T;if(za)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else jn?Jc(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Gc&&n.locale!=="ko"&&(jn||x!=="onCompositionStart"?x==="onCompositionEnd"&&jn&&(T=qc()):($t=c,La="value"in $t?$t.value:$t.textContent,jn=!0)),S=Qs(u,x),0<S.length&&(x=new Ll(x,t,null,n,c),h.push({event:x,listeners:S}),T?x.data=T:(T=Qc(n),T!==null&&(x.data=T)))),(T=op?ap(t,n):lp(t,n))&&(u=Qs(u,"onBeforeInput"),0<u.length&&(c=new Ll("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=T))}ld(h,e)})}function zr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qs(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ar(t,n),i!=null&&r.unshift(zr(t,i,s)),i=Ar(t,e),i!=null&&r.push(zr(t,i,s))),t=t.return}return r}function mn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gl(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Ar(n,i),l!=null&&o.unshift(zr(n,l,a))):s||(l=Ar(n,i),l!=null&&o.push(zr(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kp=/\r\n?/g,xp=/\u0000|\uFFFD/g;function Jl(t){return(typeof t=="string"?t:""+t).replace(kp,`
`).replace(xp,"")}function ms(t,e,n){if(e=Jl(e),Jl(t)!==e&&n)throw Error(b(425))}function Ys(){}var zo=null,Bo=null;function Mo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fo=typeof setTimeout=="function"?setTimeout:void 0,bp=typeof clearTimeout=="function"?clearTimeout:void 0,Ql=typeof Promise=="function"?Promise:void 0,Ep=typeof queueMicrotask=="function"?queueMicrotask:typeof Ql<"u"?function(t){return Ql.resolve(null).then(t).catch(Tp)}:Fo;function Tp(t){setTimeout(function(){throw t})}function Xi(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Nr(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Nr(e)}function zt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yl(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var nr=Math.random().toString(36).slice(2),lt="__reactFiber$"+nr,Br="__reactProps$"+nr,_t="__reactContainer$"+nr,Wo="__reactEvents$"+nr,Cp="__reactListeners$"+nr,jp="__reactHandles$"+nr;function nn(t){var e=t[lt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_t]||n[lt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yl(t);t!==null;){if(n=t[lt])return n;t=Yl(t)}return e}t=n,n=t.parentNode}return null}function rs(t){return t=t[lt]||t[_t],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(b(33))}function Si(t){return t[Br]||null}var Vo=[],An=-1;function qt(t){return{current:t}}function J(t){0>An||(t.current=Vo[An],Vo[An]=null,An--)}function K(t,e){An++,Vo[An]=t.current,t.current=e}var Ht={},_e=qt(Ht),Re=qt(!1),un=Ht;function Gn(t,e){var n=t.type.contextTypes;if(!n)return Ht;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Oe(t){return t=t.childContextTypes,t!=null}function Xs(){J(Re),J(_e)}function Xl(t,e,n){if(_e.current!==Ht)throw Error(b(168));K(_e,e),K(Re,n)}function cd(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(b(108,hf(t)||"Unknown",s));return Z({},n,r)}function Zs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ht,un=_e.current,K(_e,t),K(Re,Re.current),!0}function Zl(t,e,n){var r=t.stateNode;if(!r)throw Error(b(169));n?(t=cd(t,e,un),r.__reactInternalMemoizedMergedChildContext=t,J(Re),J(_e),K(_e,t)):J(Re),K(Re,n)}var gt=null,ki=!1,Zi=!1;function dd(t){gt===null?gt=[t]:gt.push(t)}function Rp(t){ki=!0,dd(t)}function Gt(){if(!Zi&&gt!==null){Zi=!0;var t=0,e=V;try{var n=gt;for(V=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gt=null,ki=!1}catch(s){throw gt!==null&&(gt=gt.slice(t+1)),Lc(Aa,Gt),s}finally{V=e,Zi=!1}}return null}var In=[],$n=0,ei=null,ti=0,Be=[],Me=0,cn=null,mt=1,yt="";function Yt(t,e){In[$n++]=ti,In[$n++]=ei,ei=t,ti=e}function hd(t,e,n){Be[Me++]=mt,Be[Me++]=yt,Be[Me++]=cn,cn=t;var r=mt;t=yt;var s=32-nt(r)-1;r&=~(1<<s),n+=1;var i=32-nt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,mt=1<<32-nt(e)+s|n<<s|r,yt=i+t}else mt=1<<i|n<<s|r,yt=t}function Ma(t){t.return!==null&&(Yt(t,1),hd(t,1,0))}function Fa(t){for(;t===ei;)ei=In[--$n],In[$n]=null,ti=In[--$n],In[$n]=null;for(;t===cn;)cn=Be[--Me],Be[Me]=null,yt=Be[--Me],Be[Me]=null,mt=Be[--Me],Be[Me]=null}var Le=null,Ne=null,Q=!1,tt=null;function fd(t,e){var n=Fe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function eu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Le=t,Ne=zt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Le=t,Ne=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cn!==null?{id:mt,overflow:yt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Le=t,Ne=null,!0):!1;default:return!1}}function Ho(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ko(t){if(Q){var e=Ne;if(e){var n=e;if(!eu(t,e)){if(Ho(t))throw Error(b(418));e=zt(n.nextSibling);var r=Le;e&&eu(t,e)?fd(r,n):(t.flags=t.flags&-4097|2,Q=!1,Le=t)}}else{if(Ho(t))throw Error(b(418));t.flags=t.flags&-4097|2,Q=!1,Le=t}}}function tu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Le=t}function ys(t){if(t!==Le)return!1;if(!Q)return tu(t),Q=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mo(t.type,t.memoizedProps)),e&&(e=Ne)){if(Ho(t))throw pd(),Error(b(418));for(;e;)fd(t,e),e=zt(e.nextSibling)}if(tu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(b(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ne=zt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ne=null}}else Ne=Le?zt(t.stateNode.nextSibling):null;return!0}function pd(){for(var t=Ne;t;)t=zt(t.nextSibling)}function Jn(){Ne=Le=null,Q=!1}function Wa(t){tt===null?tt=[t]:tt.push(t)}var Op=xt.ReactCurrentBatchConfig;function ur(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(b(309));var r=n.stateNode}if(!r)throw Error(b(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(b(284));if(!n._owner)throw Error(b(290,t))}return t}function vs(t,e){throw t=Object.prototype.toString.call(e),Error(b(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function nu(t){var e=t._init;return e(t._payload)}function gd(t){function e(y,f){if(t){var p=y.deletions;p===null?(y.deletions=[f],y.flags|=16):p.push(f)}}function n(y,f){if(!t)return null;for(;f!==null;)e(y,f),f=f.sibling;return null}function r(y,f){for(y=new Map;f!==null;)f.key!==null?y.set(f.key,f):y.set(f.index,f),f=f.sibling;return y}function s(y,f){return y=Wt(y,f),y.index=0,y.sibling=null,y}function i(y,f,p){return y.index=p,t?(p=y.alternate,p!==null?(p=p.index,p<f?(y.flags|=2,f):p):(y.flags|=2,f)):(y.flags|=1048576,f)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,f,p,v){return f===null||f.tag!==6?(f=oo(p,y.mode,v),f.return=y,f):(f=s(f,p),f.return=y,f)}function l(y,f,p,v){var E=p.type;return E===Cn?c(y,f,p.props.children,v,p.key):f!==null&&(f.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===jt&&nu(E)===f.type)?(v=s(f,p.props),v.ref=ur(y,f,p),v.return=y,v):(v=Fs(p.type,p.key,p.props,null,y.mode,v),v.ref=ur(y,f,p),v.return=y,v)}function u(y,f,p,v){return f===null||f.tag!==4||f.stateNode.containerInfo!==p.containerInfo||f.stateNode.implementation!==p.implementation?(f=ao(p,y.mode,v),f.return=y,f):(f=s(f,p.children||[]),f.return=y,f)}function c(y,f,p,v,E){return f===null||f.tag!==7?(f=ln(p,y.mode,v,E),f.return=y,f):(f=s(f,p),f.return=y,f)}function h(y,f,p){if(typeof f=="string"&&f!==""||typeof f=="number")return f=oo(""+f,y.mode,p),f.return=y,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case as:return p=Fs(f.type,f.key,f.props,null,y.mode,p),p.ref=ur(y,null,f),p.return=y,p;case Tn:return f=ao(f,y.mode,p),f.return=y,f;case jt:var v=f._init;return h(y,v(f._payload),p)}if(pr(f)||sr(f))return f=ln(f,y.mode,p,null),f.return=y,f;vs(y,f)}return null}function d(y,f,p,v){var E=f!==null?f.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return E!==null?null:a(y,f,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case as:return p.key===E?l(y,f,p,v):null;case Tn:return p.key===E?u(y,f,p,v):null;case jt:return E=p._init,d(y,f,E(p._payload),v)}if(pr(p)||sr(p))return E!==null?null:c(y,f,p,v,null);vs(y,p)}return null}function m(y,f,p,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return y=y.get(p)||null,a(f,y,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case as:return y=y.get(v.key===null?p:v.key)||null,l(f,y,v,E);case Tn:return y=y.get(v.key===null?p:v.key)||null,u(f,y,v,E);case jt:var S=v._init;return m(y,f,p,S(v._payload),E)}if(pr(v)||sr(v))return y=y.get(p)||null,c(f,y,v,E,null);vs(f,v)}return null}function w(y,f,p,v){for(var E=null,S=null,T=f,x=f=0,D=null;T!==null&&x<p.length;x++){T.index>x?(D=T,T=null):D=T.sibling;var R=d(y,T,p[x],v);if(R===null){T===null&&(T=D);break}t&&T&&R.alternate===null&&e(y,T),f=i(R,f,x),S===null?E=R:S.sibling=R,S=R,T=D}if(x===p.length)return n(y,T),Q&&Yt(y,x),E;if(T===null){for(;x<p.length;x++)T=h(y,p[x],v),T!==null&&(f=i(T,f,x),S===null?E=T:S.sibling=T,S=T);return Q&&Yt(y,x),E}for(T=r(y,T);x<p.length;x++)D=m(T,y,x,p[x],v),D!==null&&(t&&D.alternate!==null&&T.delete(D.key===null?x:D.key),f=i(D,f,x),S===null?E=D:S.sibling=D,S=D);return t&&T.forEach(function(F){return e(y,F)}),Q&&Yt(y,x),E}function _(y,f,p,v){var E=sr(p);if(typeof E!="function")throw Error(b(150));if(p=E.call(p),p==null)throw Error(b(151));for(var S=E=null,T=f,x=f=0,D=null,R=p.next();T!==null&&!R.done;x++,R=p.next()){T.index>x?(D=T,T=null):D=T.sibling;var F=d(y,T,R.value,v);if(F===null){T===null&&(T=D);break}t&&T&&F.alternate===null&&e(y,T),f=i(F,f,x),S===null?E=F:S.sibling=F,S=F,T=D}if(R.done)return n(y,T),Q&&Yt(y,x),E;if(T===null){for(;!R.done;x++,R=p.next())R=h(y,R.value,v),R!==null&&(f=i(R,f,x),S===null?E=R:S.sibling=R,S=R);return Q&&Yt(y,x),E}for(T=r(y,T);!R.done;x++,R=p.next())R=m(T,y,x,R.value,v),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?x:R.key),f=i(R,f,x),S===null?E=R:S.sibling=R,S=R);return t&&T.forEach(function(q){return e(y,q)}),Q&&Yt(y,x),E}function k(y,f,p,v){if(typeof p=="object"&&p!==null&&p.type===Cn&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case as:e:{for(var E=p.key,S=f;S!==null;){if(S.key===E){if(E=p.type,E===Cn){if(S.tag===7){n(y,S.sibling),f=s(S,p.props.children),f.return=y,y=f;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===jt&&nu(E)===S.type){n(y,S.sibling),f=s(S,p.props),f.ref=ur(y,S,p),f.return=y,y=f;break e}n(y,S);break}else e(y,S);S=S.sibling}p.type===Cn?(f=ln(p.props.children,y.mode,v,p.key),f.return=y,y=f):(v=Fs(p.type,p.key,p.props,null,y.mode,v),v.ref=ur(y,f,p),v.return=y,y=v)}return o(y);case Tn:e:{for(S=p.key;f!==null;){if(f.key===S)if(f.tag===4&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){n(y,f.sibling),f=s(f,p.children||[]),f.return=y,y=f;break e}else{n(y,f);break}else e(y,f);f=f.sibling}f=ao(p,y.mode,v),f.return=y,y=f}return o(y);case jt:return S=p._init,k(y,f,S(p._payload),v)}if(pr(p))return w(y,f,p,v);if(sr(p))return _(y,f,p,v);vs(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,f!==null&&f.tag===6?(n(y,f.sibling),f=s(f,p),f.return=y,y=f):(n(y,f),f=oo(p,y.mode,v),f.return=y,y=f),o(y)):n(y,f)}return k}var Qn=gd(!0),md=gd(!1),ni=qt(null),ri=null,Nn=null,Va=null;function Ha(){Va=Nn=ri=null}function Ka(t){var e=ni.current;J(ni),t._currentValue=e}function qo(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vn(t,e){ri=t,Va=Nn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(je=!0),t.firstContext=null)}function Ve(t){var e=t._currentValue;if(Va!==t)if(t={context:t,memoizedValue:e,next:null},Nn===null){if(ri===null)throw Error(b(308));Nn=t,ri.dependencies={lanes:0,firstContext:t}}else Nn=Nn.next=t;return e}var rn=null;function qa(t){rn===null?rn=[t]:rn.push(t)}function yd(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,qa(e)):(n.next=s.next,s.next=n),e.interleaved=n,St(t,r)}function St(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Rt=!1;function Ga(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,M&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,St(t,n)}return s=r.interleaved,s===null?(e.next=e,qa(r)):(e.next=s.next,s.next=e),r.interleaved=e,St(t,n)}function Ls(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ia(t,n)}}function ru(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function si(t,e,n,r){var s=t.updateQueue;Rt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,c=u=l=null,a=i;do{var d=a.lane,m=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,_=a;switch(d=e,m=n,_.tag){case 1:if(w=_.payload,typeof w=="function"){h=w.call(m,h,d);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=_.payload,d=typeof w=="function"?w.call(m,h,d):w,d==null)break e;h=Z({},h,d);break e;case 2:Rt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else m={eventTime:m,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=h):c=c.next=m,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(c===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);hn|=o,t.lanes=o,t.memoizedState=h}}function su(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(b(191,s));s.call(r)}}}var ss={},dt=qt(ss),Mr=qt(ss),Fr=qt(ss);function sn(t){if(t===ss)throw Error(b(174));return t}function Ja(t,e){switch(K(Fr,e),K(Mr,t),K(dt,ss),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Co(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Co(e,t)}J(dt),K(dt,e)}function Yn(){J(dt),J(Mr),J(Fr)}function wd(t){sn(Fr.current);var e=sn(dt.current),n=Co(e,t.type);e!==n&&(K(Mr,t),K(dt,n))}function Qa(t){Mr.current===t&&(J(dt),J(Mr))}var Y=qt(0);function ii(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eo=[];function Ya(){for(var t=0;t<eo.length;t++)eo[t]._workInProgressVersionPrimary=null;eo.length=0}var Ds=xt.ReactCurrentDispatcher,to=xt.ReactCurrentBatchConfig,dn=0,X=null,le=null,ce=null,oi=!1,br=!1,Wr=0,Pp=0;function ye(){throw Error(b(321))}function Xa(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!st(t[n],e[n]))return!1;return!0}function Za(t,e,n,r,s,i){if(dn=i,X=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ds.current=t===null||t.memoizedState===null?Np:Lp,t=n(r,s),br){i=0;do{if(br=!1,Wr=0,25<=i)throw Error(b(301));i+=1,ce=le=null,e.updateQueue=null,Ds.current=Dp,t=n(r,s)}while(br)}if(Ds.current=ai,e=le!==null&&le.next!==null,dn=0,ce=le=X=null,oi=!1,e)throw Error(b(300));return t}function el(){var t=Wr!==0;return Wr=0,t}function at(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ce===null?X.memoizedState=ce=t:ce=ce.next=t,ce}function He(){if(le===null){var t=X.alternate;t=t!==null?t.memoizedState:null}else t=le.next;var e=ce===null?X.memoizedState:ce.next;if(e!==null)ce=e,le=t;else{if(t===null)throw Error(b(310));le=t,t={memoizedState:le.memoizedState,baseState:le.baseState,baseQueue:le.baseQueue,queue:le.queue,next:null},ce===null?X.memoizedState=ce=t:ce=ce.next=t}return ce}function Vr(t,e){return typeof e=="function"?e(t):e}function no(t){var e=He(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=le,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((dn&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,X.lanes|=c,hn|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,st(r,e.memoizedState)||(je=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,X.lanes|=i,hn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ro(t){var e=He(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);st(i,e.memoizedState)||(je=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function _d(){}function Sd(t,e){var n=X,r=He(),s=e(),i=!st(r.memoizedState,s);if(i&&(r.memoizedState=s,je=!0),r=r.queue,tl(bd.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ce!==null&&ce.memoizedState.tag&1){if(n.flags|=2048,Hr(9,xd.bind(null,n,r,s,e),void 0,null),de===null)throw Error(b(349));dn&30||kd(n,e,s)}return s}function kd(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=X.updateQueue,e===null?(e={lastEffect:null,stores:null},X.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xd(t,e,n,r){e.value=n,e.getSnapshot=r,Ed(e)&&Td(t)}function bd(t,e,n){return n(function(){Ed(e)&&Td(t)})}function Ed(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!st(t,n)}catch{return!0}}function Td(t){var e=St(t,1);e!==null&&rt(e,t,1,-1)}function iu(t){var e=at();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:t},e.queue=t,t=t.dispatch=$p.bind(null,X,t),[e.memoizedState,t]}function Hr(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=X.updateQueue,e===null?(e={lastEffect:null,stores:null},X.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Cd(){return He().memoizedState}function Us(t,e,n,r){var s=at();X.flags|=t,s.memoizedState=Hr(1|e,n,void 0,r===void 0?null:r)}function xi(t,e,n,r){var s=He();r=r===void 0?null:r;var i=void 0;if(le!==null){var o=le.memoizedState;if(i=o.destroy,r!==null&&Xa(r,o.deps)){s.memoizedState=Hr(e,n,i,r);return}}X.flags|=t,s.memoizedState=Hr(1|e,n,i,r)}function ou(t,e){return Us(8390656,8,t,e)}function tl(t,e){return xi(2048,8,t,e)}function jd(t,e){return xi(4,2,t,e)}function Rd(t,e){return xi(4,4,t,e)}function Od(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pd(t,e,n){return n=n!=null?n.concat([t]):null,xi(4,4,Od.bind(null,e,t),n)}function nl(){}function Ad(t,e){var n=He();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xa(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Id(t,e){var n=He();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xa(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $d(t,e,n){return dn&21?(st(n,e)||(n=zc(),X.lanes|=n,hn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,je=!0),t.memoizedState=n)}function Ap(t,e){var n=V;V=n!==0&&4>n?n:4,t(!0);var r=to.transition;to.transition={};try{t(!1),e()}finally{V=n,to.transition=r}}function Nd(){return He().memoizedState}function Ip(t,e,n){var r=Ft(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ld(t))Dd(e,n);else if(n=yd(t,e,n,r),n!==null){var s=xe();rt(n,t,r,s),Ud(n,e,r)}}function $p(t,e,n){var r=Ft(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ld(t))Dd(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,st(a,o)){var l=e.interleaved;l===null?(s.next=s,qa(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=yd(t,e,s,r),n!==null&&(s=xe(),rt(n,t,r,s),Ud(n,e,r))}}function Ld(t){var e=t.alternate;return t===X||e!==null&&e===X}function Dd(t,e){br=oi=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ud(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ia(t,n)}}var ai={readContext:Ve,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useInsertionEffect:ye,useLayoutEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useMutableSource:ye,useSyncExternalStore:ye,useId:ye,unstable_isNewReconciler:!1},Np={readContext:Ve,useCallback:function(t,e){return at().memoizedState=[t,e===void 0?null:e],t},useContext:Ve,useEffect:ou,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Us(4194308,4,Od.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Us(4194308,4,t,e)},useInsertionEffect:function(t,e){return Us(4,2,t,e)},useMemo:function(t,e){var n=at();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=at();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ip.bind(null,X,t),[r.memoizedState,t]},useRef:function(t){var e=at();return t={current:t},e.memoizedState=t},useState:iu,useDebugValue:nl,useDeferredValue:function(t){return at().memoizedState=t},useTransition:function(){var t=iu(!1),e=t[0];return t=Ap.bind(null,t[1]),at().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=X,s=at();if(Q){if(n===void 0)throw Error(b(407));n=n()}else{if(n=e(),de===null)throw Error(b(349));dn&30||kd(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ou(bd.bind(null,r,i,t),[t]),r.flags|=2048,Hr(9,xd.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=at(),e=de.identifierPrefix;if(Q){var n=yt,r=mt;n=(r&~(1<<32-nt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wr++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Pp++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Lp={readContext:Ve,useCallback:Ad,useContext:Ve,useEffect:tl,useImperativeHandle:Pd,useInsertionEffect:jd,useLayoutEffect:Rd,useMemo:Id,useReducer:no,useRef:Cd,useState:function(){return no(Vr)},useDebugValue:nl,useDeferredValue:function(t){var e=He();return $d(e,le.memoizedState,t)},useTransition:function(){var t=no(Vr)[0],e=He().memoizedState;return[t,e]},useMutableSource:_d,useSyncExternalStore:Sd,useId:Nd,unstable_isNewReconciler:!1},Dp={readContext:Ve,useCallback:Ad,useContext:Ve,useEffect:tl,useImperativeHandle:Pd,useInsertionEffect:jd,useLayoutEffect:Rd,useMemo:Id,useReducer:ro,useRef:Cd,useState:function(){return ro(Vr)},useDebugValue:nl,useDeferredValue:function(t){var e=He();return le===null?e.memoizedState=t:$d(e,le.memoizedState,t)},useTransition:function(){var t=ro(Vr)[0],e=He().memoizedState;return[t,e]},useMutableSource:_d,useSyncExternalStore:Sd,useId:Nd,unstable_isNewReconciler:!1};function Ye(t,e){if(t&&t.defaultProps){e=Z({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Go(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Z({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bi={isMounted:function(t){return(t=t._reactInternals)?gn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xe(),s=Ft(t),i=vt(r,s);i.payload=e,n!=null&&(i.callback=n),e=Bt(t,i,s),e!==null&&(rt(e,t,s,r),Ls(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xe(),s=Ft(t),i=vt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Bt(t,i,s),e!==null&&(rt(e,t,s,r),Ls(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xe(),r=Ft(t),s=vt(n,r);s.tag=2,e!=null&&(s.callback=e),e=Bt(t,s,r),e!==null&&(rt(e,t,r,n),Ls(e,t,r))}};function au(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Dr(n,r)||!Dr(s,i):!0}function zd(t,e,n){var r=!1,s=Ht,i=e.contextType;return typeof i=="object"&&i!==null?i=Ve(i):(s=Oe(e)?un:_e.current,r=e.contextTypes,i=(r=r!=null)?Gn(t,s):Ht),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bi,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function lu(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bi.enqueueReplaceState(e,e.state,null)}function Jo(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ga(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ve(i):(i=Oe(e)?un:_e.current,s.context=Gn(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Go(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bi.enqueueReplaceState(s,s.state,null),si(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Xn(t,e){try{var n="",r=e;do n+=df(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function so(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qo(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Up=typeof WeakMap=="function"?WeakMap:Map;function Bd(t,e,n){n=vt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ui||(ui=!0,oa=r),Qo(t,e)},n}function Md(t,e,n){n=vt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Qo(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qo(t,e),typeof r!="function"&&(Mt===null?Mt=new Set([this]):Mt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function uu(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Up;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Xp.bind(null,t,e,n),e.then(t,t))}function cu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function du(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vt(-1,1),e.tag=2,Bt(n,e,1))),n.lanes|=1),t)}var zp=xt.ReactCurrentOwner,je=!1;function ke(t,e,n,r){e.child=t===null?md(e,null,n,r):Qn(e,t.child,n,r)}function hu(t,e,n,r,s){n=n.render;var i=e.ref;return Vn(e,s),r=Za(t,e,n,r,i,s),n=el(),t!==null&&!je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,kt(t,e,s)):(Q&&n&&Ma(e),e.flags|=1,ke(t,e,r,s),e.child)}function fu(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!cl(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Fd(t,e,i,r,s)):(t=Fs(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Dr,n(o,r)&&t.ref===e.ref)return kt(t,e,s)}return e.flags|=1,t=Wt(i,r),t.ref=e.ref,t.return=e,e.child=t}function Fd(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Dr(i,r)&&t.ref===e.ref)if(je=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(je=!0);else return e.lanes=t.lanes,kt(t,e,s)}return Yo(t,e,n,r,s)}function Wd(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},K(Dn,Ie),Ie|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,K(Dn,Ie),Ie|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,K(Dn,Ie),Ie|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,K(Dn,Ie),Ie|=r;return ke(t,e,s,n),e.child}function Vd(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yo(t,e,n,r,s){var i=Oe(n)?un:_e.current;return i=Gn(e,i),Vn(e,s),n=Za(t,e,n,r,i,s),r=el(),t!==null&&!je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,kt(t,e,s)):(Q&&r&&Ma(e),e.flags|=1,ke(t,e,n,s),e.child)}function pu(t,e,n,r,s){if(Oe(n)){var i=!0;Zs(e)}else i=!1;if(Vn(e,s),e.stateNode===null)zs(t,e),zd(e,n,r),Jo(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ve(u):(u=Oe(n)?un:_e.current,u=Gn(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&lu(e,o,r,u),Rt=!1;var d=e.memoizedState;o.state=d,si(e,r,o,s),l=e.memoizedState,a!==r||d!==l||Re.current||Rt?(typeof c=="function"&&(Go(e,n,c,r),l=e.memoizedState),(a=Rt||au(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,vd(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ye(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ve(l):(l=Oe(n)?un:_e.current,l=Gn(e,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&lu(e,o,r,l),Rt=!1,d=e.memoizedState,o.state=d,si(e,r,o,s);var w=e.memoizedState;a!==h||d!==w||Re.current||Rt?(typeof m=="function"&&(Go(e,n,m,r),w=e.memoizedState),(u=Rt||au(e,n,u,r,d,w,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Xo(t,e,n,r,i,s)}function Xo(t,e,n,r,s,i){Vd(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Zl(e,n,!1),kt(t,e,i);r=e.stateNode,zp.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Qn(e,t.child,null,i),e.child=Qn(e,null,a,i)):ke(t,e,a,i),e.memoizedState=r.state,s&&Zl(e,n,!0),e.child}function Hd(t){var e=t.stateNode;e.pendingContext?Xl(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xl(t,e.context,!1),Ja(t,e.containerInfo)}function gu(t,e,n,r,s){return Jn(),Wa(s),e.flags|=256,ke(t,e,n,r),e.child}var Zo={dehydrated:null,treeContext:null,retryLane:0};function ea(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kd(t,e,n){var r=e.pendingProps,s=Y.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),K(Y,s&1),t===null)return Ko(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ci(o,r,0,null),t=ln(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ea(n),e.memoizedState=Zo,t):rl(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Bp(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Wt(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Wt(a,i):(i=ln(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ea(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Zo,r}return i=t.child,t=i.sibling,r=Wt(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rl(t,e){return e=Ci({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ws(t,e,n,r){return r!==null&&Wa(r),Qn(e,t.child,null,n),t=rl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Bp(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=so(Error(b(422))),ws(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ci({mode:"visible",children:r.children},s,0,null),i=ln(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Qn(e,t.child,null,o),e.child.memoizedState=ea(o),e.memoizedState=Zo,i);if(!(e.mode&1))return ws(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(b(419)),r=so(i,r,void 0),ws(t,e,o,r)}if(a=(o&t.childLanes)!==0,je||a){if(r=de,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,St(t,s),rt(r,t,s,-1))}return ul(),r=so(Error(b(421))),ws(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Zp.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ne=zt(s.nextSibling),Le=e,Q=!0,tt=null,t!==null&&(Be[Me++]=mt,Be[Me++]=yt,Be[Me++]=cn,mt=t.id,yt=t.overflow,cn=e),e=rl(e,r.children),e.flags|=4096,e)}function mu(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qo(t.return,e,n)}function io(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function qd(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ke(t,e,r.children,n),r=Y.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mu(t,n,e);else if(t.tag===19)mu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(K(Y,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ii(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),io(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ii(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}io(e,!0,n,null,i);break;case"together":io(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(b(153));if(e.child!==null){for(t=e.child,n=Wt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Mp(t,e,n){switch(e.tag){case 3:Hd(e),Jn();break;case 5:wd(e);break;case 1:Oe(e.type)&&Zs(e);break;case 4:Ja(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;K(ni,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(K(Y,Y.current&1),e.flags|=128,null):n&e.child.childLanes?Kd(t,e,n):(K(Y,Y.current&1),t=kt(t,e,n),t!==null?t.sibling:null);K(Y,Y.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qd(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),K(Y,Y.current),r)break;return null;case 22:case 23:return e.lanes=0,Wd(t,e,n)}return kt(t,e,n)}var Gd,ta,Jd,Qd;Gd=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ta=function(){};Jd=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,sn(dt.current);var i=null;switch(n){case"input":s=xo(t,s),r=xo(t,r),i=[];break;case"select":s=Z({},s,{value:void 0}),r=Z({},r,{value:void 0}),i=[];break;case"textarea":s=To(t,s),r=To(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ys)}jo(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Or.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Or.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&G("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Qd=function(t,e,n,r){n!==r&&(e.flags|=4)};function cr(t,e){if(!Q)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ve(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Fp(t,e,n){var r=e.pendingProps;switch(Fa(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ve(e),null;case 1:return Oe(e.type)&&Xs(),ve(e),null;case 3:return r=e.stateNode,Yn(),J(Re),J(_e),Ya(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ys(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tt!==null&&(ua(tt),tt=null))),ta(t,e),ve(e),null;case 5:Qa(e);var s=sn(Fr.current);if(n=e.type,t!==null&&e.stateNode!=null)Jd(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(b(166));return ve(e),null}if(t=sn(dt.current),ys(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[lt]=e,r[Br]=i,t=(e.mode&1)!==0,n){case"dialog":G("cancel",r),G("close",r);break;case"iframe":case"object":case"embed":G("load",r);break;case"video":case"audio":for(s=0;s<mr.length;s++)G(mr[s],r);break;case"source":G("error",r);break;case"img":case"image":case"link":G("error",r),G("load",r);break;case"details":G("toggle",r);break;case"input":El(r,i),G("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},G("invalid",r);break;case"textarea":Cl(r,i),G("invalid",r)}jo(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ms(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ms(r.textContent,a,t),s=["children",""+a]):Or.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&G("scroll",r)}switch(n){case"input":ls(r),Tl(r,i,!0);break;case"textarea":ls(r),jl(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ys)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bc(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[lt]=e,t[Br]=r,Gd(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ro(n,r),n){case"dialog":G("cancel",t),G("close",t),s=r;break;case"iframe":case"object":case"embed":G("load",t),s=r;break;case"video":case"audio":for(s=0;s<mr.length;s++)G(mr[s],t);s=r;break;case"source":G("error",t),s=r;break;case"img":case"image":case"link":G("error",t),G("load",t),s=r;break;case"details":G("toggle",t),s=r;break;case"input":El(t,r),s=xo(t,r),G("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Z({},r,{value:void 0}),G("invalid",t);break;case"textarea":Cl(t,r),s=To(t,r),G("invalid",t);break;default:s=r}jo(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Cc(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ec(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Pr(t,l):typeof l=="number"&&Pr(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Or.hasOwnProperty(i)?l!=null&&i==="onScroll"&&G("scroll",t):l!=null&&Ca(t,i,l,o))}switch(n){case"input":ls(t),Tl(t,r,!1);break;case"textarea":ls(t),jl(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vt(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Bn(t,!!r.multiple,i,!1):r.defaultValue!=null&&Bn(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ys)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ve(e),null;case 6:if(t&&e.stateNode!=null)Qd(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(b(166));if(n=sn(Fr.current),sn(dt.current),ys(e)){if(r=e.stateNode,n=e.memoizedProps,r[lt]=e,(i=r.nodeValue!==n)&&(t=Le,t!==null))switch(t.tag){case 3:ms(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ms(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lt]=e,e.stateNode=r}return ve(e),null;case 13:if(J(Y),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Q&&Ne!==null&&e.mode&1&&!(e.flags&128))pd(),Jn(),e.flags|=98560,i=!1;else if(i=ys(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(b(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(b(317));i[lt]=e}else Jn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ve(e),i=!1}else tt!==null&&(ua(tt),tt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Y.current&1?ue===0&&(ue=3):ul())),e.updateQueue!==null&&(e.flags|=4),ve(e),null);case 4:return Yn(),ta(t,e),t===null&&Ur(e.stateNode.containerInfo),ve(e),null;case 10:return Ka(e.type._context),ve(e),null;case 17:return Oe(e.type)&&Xs(),ve(e),null;case 19:if(J(Y),i=e.memoizedState,i===null)return ve(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)cr(i,!1);else{if(ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ii(t),o!==null){for(e.flags|=128,cr(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return K(Y,Y.current&1|2),e.child}t=t.sibling}i.tail!==null&&re()>Zn&&(e.flags|=128,r=!0,cr(i,!1),e.lanes=4194304)}else{if(!r)if(t=ii(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Q)return ve(e),null}else 2*re()-i.renderingStartTime>Zn&&n!==1073741824&&(e.flags|=128,r=!0,cr(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=re(),e.sibling=null,n=Y.current,K(Y,r?n&1|2:n&1),e):(ve(e),null);case 22:case 23:return ll(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ie&1073741824&&(ve(e),e.subtreeFlags&6&&(e.flags|=8192)):ve(e),null;case 24:return null;case 25:return null}throw Error(b(156,e.tag))}function Wp(t,e){switch(Fa(e),e.tag){case 1:return Oe(e.type)&&Xs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Yn(),J(Re),J(_e),Ya(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qa(e),null;case 13:if(J(Y),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(b(340));Jn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return J(Y),null;case 4:return Yn(),null;case 10:return Ka(e.type._context),null;case 22:case 23:return ll(),null;case 24:return null;default:return null}}var _s=!1,we=!1,Vp=typeof WeakSet=="function"?WeakSet:Set,O=null;function Ln(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){te(t,e,r)}else n.current=null}function na(t,e,n){try{n()}catch(r){te(t,e,r)}}var yu=!1;function Hp(t,e){if(zo=Gs,t=td(),Ba(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)d=h,h=m;for(;;){if(h===t)break t;if(d===n&&++u===s&&(a=o),d===i&&++c===r&&(l=o),(m=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bo={focusedElem:t,selectionRange:n},Gs=!1,O=e;O!==null;)if(e=O,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,O=t;else for(;O!==null;){e=O;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var _=w.memoizedProps,k=w.memoizedState,y=e.stateNode,f=y.getSnapshotBeforeUpdate(e.elementType===e.type?_:Ye(e.type,_),k);y.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var p=e.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(v){te(e,e.return,v)}if(t=e.sibling,t!==null){t.return=e.return,O=t;break}O=e.return}return w=yu,yu=!1,w}function Er(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&na(e,n,i)}s=s.next}while(s!==r)}}function Ei(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ra(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Yd(t){var e=t.alternate;e!==null&&(t.alternate=null,Yd(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lt],delete e[Br],delete e[Wo],delete e[Cp],delete e[jp])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xd(t){return t.tag===5||t.tag===3||t.tag===4}function vu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ys));else if(r!==4&&(t=t.child,t!==null))for(sa(t,e,n),t=t.sibling;t!==null;)sa(t,e,n),t=t.sibling}function ia(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ia(t,e,n),t=t.sibling;t!==null;)ia(t,e,n),t=t.sibling}var pe=null,Ze=!1;function Ct(t,e,n){for(n=n.child;n!==null;)Zd(t,e,n),n=n.sibling}function Zd(t,e,n){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(yi,n)}catch{}switch(n.tag){case 5:we||Ln(n,e);case 6:var r=pe,s=Ze;pe=null,Ct(t,e,n),pe=r,Ze=s,pe!==null&&(Ze?(t=pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):pe.removeChild(n.stateNode));break;case 18:pe!==null&&(Ze?(t=pe,n=n.stateNode,t.nodeType===8?Xi(t.parentNode,n):t.nodeType===1&&Xi(t,n),Nr(t)):Xi(pe,n.stateNode));break;case 4:r=pe,s=Ze,pe=n.stateNode.containerInfo,Ze=!0,Ct(t,e,n),pe=r,Ze=s;break;case 0:case 11:case 14:case 15:if(!we&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&na(n,e,o),s=s.next}while(s!==r)}Ct(t,e,n);break;case 1:if(!we&&(Ln(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){te(n,e,a)}Ct(t,e,n);break;case 21:Ct(t,e,n);break;case 22:n.mode&1?(we=(r=we)||n.memoizedState!==null,Ct(t,e,n),we=r):Ct(t,e,n);break;default:Ct(t,e,n)}}function wu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Vp),e.forEach(function(r){var s=eg.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Je(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:pe=a.stateNode,Ze=!1;break e;case 3:pe=a.stateNode.containerInfo,Ze=!0;break e;case 4:pe=a.stateNode.containerInfo,Ze=!0;break e}a=a.return}if(pe===null)throw Error(b(160));Zd(i,o,s),pe=null,Ze=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){te(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eh(e,t),e=e.sibling}function eh(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Je(e,t),ot(t),r&4){try{Er(3,t,t.return),Ei(3,t)}catch(_){te(t,t.return,_)}try{Er(5,t,t.return)}catch(_){te(t,t.return,_)}}break;case 1:Je(e,t),ot(t),r&512&&n!==null&&Ln(n,n.return);break;case 5:if(Je(e,t),ot(t),r&512&&n!==null&&Ln(n,n.return),t.flags&32){var s=t.stateNode;try{Pr(s,"")}catch(_){te(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&kc(s,i),Ro(a,o);var u=Ro(a,i);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?Cc(s,h):c==="dangerouslySetInnerHTML"?Ec(s,h):c==="children"?Pr(s,h):Ca(s,c,h,u)}switch(a){case"input":bo(s,i);break;case"textarea":xc(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Bn(s,!!i.multiple,m,!1):d!==!!i.multiple&&(i.defaultValue!=null?Bn(s,!!i.multiple,i.defaultValue,!0):Bn(s,!!i.multiple,i.multiple?[]:"",!1))}s[Br]=i}catch(_){te(t,t.return,_)}}break;case 6:if(Je(e,t),ot(t),r&4){if(t.stateNode===null)throw Error(b(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){te(t,t.return,_)}}break;case 3:if(Je(e,t),ot(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nr(e.containerInfo)}catch(_){te(t,t.return,_)}break;case 4:Je(e,t),ot(t);break;case 13:Je(e,t),ot(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ol=re())),r&4&&wu(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(we=(u=we)||c,Je(e,t),we=u):Je(e,t),ot(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(O=t,c=t.child;c!==null;){for(h=O=c;O!==null;){switch(d=O,m=d.child,d.tag){case 0:case 11:case 14:case 15:Er(4,d,d.return);break;case 1:Ln(d,d.return);var w=d.stateNode;if(typeof w.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(_){te(r,n,_)}}break;case 5:Ln(d,d.return);break;case 22:if(d.memoizedState!==null){Su(h);continue}}m!==null?(m.return=d,O=m):Su(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Tc("display",o))}catch(_){te(t,t.return,_)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(_){te(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Je(e,t),ot(t),r&4&&wu(t);break;case 21:break;default:Je(e,t),ot(t)}}function ot(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Xd(n)){var r=n;break e}n=n.return}throw Error(b(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Pr(s,""),r.flags&=-33);var i=vu(t);ia(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=vu(t);sa(t,a,o);break;default:throw Error(b(161))}}catch(l){te(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Kp(t,e,n){O=t,th(t)}function th(t,e,n){for(var r=(t.mode&1)!==0;O!==null;){var s=O,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||_s;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||we;a=_s;var u=we;if(_s=o,(we=l)&&!u)for(O=s;O!==null;)o=O,l=o.child,o.tag===22&&o.memoizedState!==null?ku(s):l!==null?(l.return=o,O=l):ku(s);for(;i!==null;)O=i,th(i),i=i.sibling;O=s,_s=a,we=u}_u(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,O=i):_u(t)}}function _u(t){for(;O!==null;){var e=O;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:we||Ei(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!we)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ye(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&su(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}su(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Nr(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}we||e.flags&512&&ra(e)}catch(d){te(e,e.return,d)}}if(e===t){O=null;break}if(n=e.sibling,n!==null){n.return=e.return,O=n;break}O=e.return}}function Su(t){for(;O!==null;){var e=O;if(e===t){O=null;break}var n=e.sibling;if(n!==null){n.return=e.return,O=n;break}O=e.return}}function ku(t){for(;O!==null;){var e=O;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ei(4,e)}catch(l){te(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){te(e,s,l)}}var i=e.return;try{ra(e)}catch(l){te(e,i,l)}break;case 5:var o=e.return;try{ra(e)}catch(l){te(e,o,l)}}}catch(l){te(e,e.return,l)}if(e===t){O=null;break}var a=e.sibling;if(a!==null){a.return=e.return,O=a;break}O=e.return}}var qp=Math.ceil,li=xt.ReactCurrentDispatcher,sl=xt.ReactCurrentOwner,We=xt.ReactCurrentBatchConfig,M=0,de=null,oe=null,ge=0,Ie=0,Dn=qt(0),ue=0,Kr=null,hn=0,Ti=0,il=0,Tr=null,Ce=null,ol=0,Zn=1/0,ft=null,ui=!1,oa=null,Mt=null,Ss=!1,Nt=null,ci=0,Cr=0,aa=null,Bs=-1,Ms=0;function xe(){return M&6?re():Bs!==-1?Bs:Bs=re()}function Ft(t){return t.mode&1?M&2&&ge!==0?ge&-ge:Op.transition!==null?(Ms===0&&(Ms=zc()),Ms):(t=V,t!==0||(t=window.event,t=t===void 0?16:Kc(t.type)),t):1}function rt(t,e,n,r){if(50<Cr)throw Cr=0,aa=null,Error(b(185));ts(t,n,r),(!(M&2)||t!==de)&&(t===de&&(!(M&2)&&(Ti|=n),ue===4&&At(t,ge)),Pe(t,r),n===1&&M===0&&!(e.mode&1)&&(Zn=re()+500,ki&&Gt()))}function Pe(t,e){var n=t.callbackNode;Of(t,e);var r=qs(t,t===de?ge:0);if(r===0)n!==null&&Pl(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Pl(n),e===1)t.tag===0?Rp(xu.bind(null,t)):dd(xu.bind(null,t)),Ep(function(){!(M&6)&&Gt()}),n=null;else{switch(Bc(r)){case 1:n=Aa;break;case 4:n=Dc;break;case 16:n=Ks;break;case 536870912:n=Uc;break;default:n=Ks}n=uh(n,nh.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nh(t,e){if(Bs=-1,Ms=0,M&6)throw Error(b(327));var n=t.callbackNode;if(Hn()&&t.callbackNode!==n)return null;var r=qs(t,t===de?ge:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=di(t,r);else{e=r;var s=M;M|=2;var i=sh();(de!==t||ge!==e)&&(ft=null,Zn=re()+500,an(t,e));do try{Qp();break}catch(a){rh(t,a)}while(!0);Ha(),li.current=i,M=s,oe!==null?e=0:(de=null,ge=0,e=ue)}if(e!==0){if(e===2&&(s=$o(t),s!==0&&(r=s,e=la(t,s))),e===1)throw n=Kr,an(t,0),At(t,r),Pe(t,re()),n;if(e===6)At(t,r);else{if(s=t.current.alternate,!(r&30)&&!Gp(s)&&(e=di(t,r),e===2&&(i=$o(t),i!==0&&(r=i,e=la(t,i))),e===1))throw n=Kr,an(t,0),At(t,r),Pe(t,re()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(b(345));case 2:Xt(t,Ce,ft);break;case 3:if(At(t,r),(r&130023424)===r&&(e=ol+500-re(),10<e)){if(qs(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xe(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Fo(Xt.bind(null,t,Ce,ft),e);break}Xt(t,Ce,ft);break;case 4:if(At(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-nt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qp(r/1960))-r,10<r){t.timeoutHandle=Fo(Xt.bind(null,t,Ce,ft),r);break}Xt(t,Ce,ft);break;case 5:Xt(t,Ce,ft);break;default:throw Error(b(329))}}}return Pe(t,re()),t.callbackNode===n?nh.bind(null,t):null}function la(t,e){var n=Tr;return t.current.memoizedState.isDehydrated&&(an(t,e).flags|=256),t=di(t,e),t!==2&&(e=Ce,Ce=n,e!==null&&ua(e)),t}function ua(t){Ce===null?Ce=t:Ce.push.apply(Ce,t)}function Gp(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!st(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function At(t,e){for(e&=~il,e&=~Ti,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nt(e),r=1<<n;t[n]=-1,e&=~r}}function xu(t){if(M&6)throw Error(b(327));Hn();var e=qs(t,0);if(!(e&1))return Pe(t,re()),null;var n=di(t,e);if(t.tag!==0&&n===2){var r=$o(t);r!==0&&(e=r,n=la(t,r))}if(n===1)throw n=Kr,an(t,0),At(t,e),Pe(t,re()),n;if(n===6)throw Error(b(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xt(t,Ce,ft),Pe(t,re()),null}function al(t,e){var n=M;M|=1;try{return t(e)}finally{M=n,M===0&&(Zn=re()+500,ki&&Gt())}}function fn(t){Nt!==null&&Nt.tag===0&&!(M&6)&&Hn();var e=M;M|=1;var n=We.transition,r=V;try{if(We.transition=null,V=1,t)return t()}finally{V=r,We.transition=n,M=e,!(M&6)&&Gt()}}function ll(){Ie=Dn.current,J(Dn)}function an(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bp(n)),oe!==null)for(n=oe.return;n!==null;){var r=n;switch(Fa(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xs();break;case 3:Yn(),J(Re),J(_e),Ya();break;case 5:Qa(r);break;case 4:Yn();break;case 13:J(Y);break;case 19:J(Y);break;case 10:Ka(r.type._context);break;case 22:case 23:ll()}n=n.return}if(de=t,oe=t=Wt(t.current,null),ge=Ie=e,ue=0,Kr=null,il=Ti=hn=0,Ce=Tr=null,rn!==null){for(e=0;e<rn.length;e++)if(n=rn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}rn=null}return t}function rh(t,e){do{var n=oe;try{if(Ha(),Ds.current=ai,oi){for(var r=X.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}oi=!1}if(dn=0,ce=le=X=null,br=!1,Wr=0,sl.current=null,n===null||n.return===null){ue=1,Kr=e,oe=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=ge,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=cu(o);if(m!==null){m.flags&=-257,du(m,o,a,i,e),m.mode&1&&uu(i,u,e),e=m,l=u;var w=e.updateQueue;if(w===null){var _=new Set;_.add(l),e.updateQueue=_}else w.add(l);break e}else{if(!(e&1)){uu(i,u,e),ul();break e}l=Error(b(426))}}else if(Q&&a.mode&1){var k=cu(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),du(k,o,a,i,e),Wa(Xn(l,a));break e}}i=l=Xn(l,a),ue!==4&&(ue=2),Tr===null?Tr=[i]:Tr.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Bd(i,l,e);ru(i,y);break e;case 1:a=l;var f=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Mt===null||!Mt.has(p)))){i.flags|=65536,e&=-e,i.lanes|=e;var v=Md(i,a,e);ru(i,v);break e}}i=i.return}while(i!==null)}oh(n)}catch(E){e=E,oe===n&&n!==null&&(oe=n=n.return);continue}break}while(!0)}function sh(){var t=li.current;return li.current=ai,t===null?ai:t}function ul(){(ue===0||ue===3||ue===2)&&(ue=4),de===null||!(hn&268435455)&&!(Ti&268435455)||At(de,ge)}function di(t,e){var n=M;M|=2;var r=sh();(de!==t||ge!==e)&&(ft=null,an(t,e));do try{Jp();break}catch(s){rh(t,s)}while(!0);if(Ha(),M=n,li.current=r,oe!==null)throw Error(b(261));return de=null,ge=0,ue}function Jp(){for(;oe!==null;)ih(oe)}function Qp(){for(;oe!==null&&!Sf();)ih(oe)}function ih(t){var e=lh(t.alternate,t,Ie);t.memoizedProps=t.pendingProps,e===null?oh(t):oe=e,sl.current=null}function oh(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Wp(n,e),n!==null){n.flags&=32767,oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ue=6,oe=null;return}}else if(n=Fp(n,e,Ie),n!==null){oe=n;return}if(e=e.sibling,e!==null){oe=e;return}oe=e=t}while(e!==null);ue===0&&(ue=5)}function Xt(t,e,n){var r=V,s=We.transition;try{We.transition=null,V=1,Yp(t,e,n,r)}finally{We.transition=s,V=r}return null}function Yp(t,e,n,r){do Hn();while(Nt!==null);if(M&6)throw Error(b(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(b(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Pf(t,i),t===de&&(oe=de=null,ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ss||(Ss=!0,uh(Ks,function(){return Hn(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=We.transition,We.transition=null;var o=V;V=1;var a=M;M|=4,sl.current=null,Hp(t,n),eh(n,t),yp(Bo),Gs=!!zo,Bo=zo=null,t.current=n,Kp(n),kf(),M=a,V=o,We.transition=i}else t.current=n;if(Ss&&(Ss=!1,Nt=t,ci=s),i=t.pendingLanes,i===0&&(Mt=null),Ef(n.stateNode),Pe(t,re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ui)throw ui=!1,t=oa,oa=null,t;return ci&1&&t.tag!==0&&Hn(),i=t.pendingLanes,i&1?t===aa?Cr++:(Cr=0,aa=t):Cr=0,Gt(),null}function Hn(){if(Nt!==null){var t=Bc(ci),e=We.transition,n=V;try{if(We.transition=null,V=16>t?16:t,Nt===null)var r=!1;else{if(t=Nt,Nt=null,ci=0,M&6)throw Error(b(331));var s=M;for(M|=4,O=t.current;O!==null;){var i=O,o=i.child;if(O.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(O=u;O!==null;){var c=O;switch(c.tag){case 0:case 11:case 15:Er(8,c,i)}var h=c.child;if(h!==null)h.return=c,O=h;else for(;O!==null;){c=O;var d=c.sibling,m=c.return;if(Yd(c),c===u){O=null;break}if(d!==null){d.return=m,O=d;break}O=m}}}var w=i.alternate;if(w!==null){var _=w.child;if(_!==null){w.child=null;do{var k=_.sibling;_.sibling=null,_=k}while(_!==null)}}O=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,O=o;else e:for(;O!==null;){if(i=O,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Er(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,O=y;break e}O=i.return}}var f=t.current;for(O=f;O!==null;){o=O;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,O=p;else e:for(o=f;O!==null;){if(a=O,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ei(9,a)}}catch(E){te(a,a.return,E)}if(a===o){O=null;break e}var v=a.sibling;if(v!==null){v.return=a.return,O=v;break e}O=a.return}}if(M=s,Gt(),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(yi,t)}catch{}r=!0}return r}finally{V=n,We.transition=e}}return!1}function bu(t,e,n){e=Xn(n,e),e=Bd(t,e,1),t=Bt(t,e,1),e=xe(),t!==null&&(ts(t,1,e),Pe(t,e))}function te(t,e,n){if(t.tag===3)bu(t,t,n);else for(;e!==null;){if(e.tag===3){bu(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mt===null||!Mt.has(r))){t=Xn(n,t),t=Md(e,t,1),e=Bt(e,t,1),t=xe(),e!==null&&(ts(e,1,t),Pe(e,t));break}}e=e.return}}function Xp(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xe(),t.pingedLanes|=t.suspendedLanes&n,de===t&&(ge&n)===n&&(ue===4||ue===3&&(ge&130023424)===ge&&500>re()-ol?an(t,0):il|=n),Pe(t,e)}function ah(t,e){e===0&&(t.mode&1?(e=ds,ds<<=1,!(ds&130023424)&&(ds=4194304)):e=1);var n=xe();t=St(t,e),t!==null&&(ts(t,e,n),Pe(t,n))}function Zp(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ah(t,n)}function eg(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(b(314))}r!==null&&r.delete(e),ah(t,n)}var lh;lh=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Re.current)je=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return je=!1,Mp(t,e,n);je=!!(t.flags&131072)}else je=!1,Q&&e.flags&1048576&&hd(e,ti,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zs(t,e),t=e.pendingProps;var s=Gn(e,_e.current);Vn(e,n),s=Za(null,e,r,t,s,n);var i=el();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oe(r)?(i=!0,Zs(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ga(e),s.updater=bi,e.stateNode=s,s._reactInternals=e,Jo(e,r,t,n),e=Xo(null,e,r,!0,i,n)):(e.tag=0,Q&&i&&Ma(e),ke(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(zs(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=ng(r),t=Ye(r,t),s){case 0:e=Yo(null,e,r,t,n);break e;case 1:e=pu(null,e,r,t,n);break e;case 11:e=hu(null,e,r,t,n);break e;case 14:e=fu(null,e,r,Ye(r.type,t),n);break e}throw Error(b(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ye(r,s),Yo(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ye(r,s),pu(t,e,r,s,n);case 3:e:{if(Hd(e),t===null)throw Error(b(387));r=e.pendingProps,i=e.memoizedState,s=i.element,vd(t,e),si(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Xn(Error(b(423)),e),e=gu(t,e,r,n,s);break e}else if(r!==s){s=Xn(Error(b(424)),e),e=gu(t,e,r,n,s);break e}else for(Ne=zt(e.stateNode.containerInfo.firstChild),Le=e,Q=!0,tt=null,n=md(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jn(),r===s){e=kt(t,e,n);break e}ke(t,e,r,n)}e=e.child}return e;case 5:return wd(e),t===null&&Ko(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Mo(r,s)?o=null:i!==null&&Mo(r,i)&&(e.flags|=32),Vd(t,e),ke(t,e,o,n),e.child;case 6:return t===null&&Ko(e),null;case 13:return Kd(t,e,n);case 4:return Ja(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Qn(e,null,r,n):ke(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ye(r,s),hu(t,e,r,s,n);case 7:return ke(t,e,e.pendingProps,n),e.child;case 8:return ke(t,e,e.pendingProps.children,n),e.child;case 12:return ke(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,K(ni,r._currentValue),r._currentValue=o,i!==null)if(st(i.value,o)){if(i.children===s.children&&!Re.current){e=kt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=vt(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),qo(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(b(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),qo(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ke(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Vn(e,n),s=Ve(s),r=r(s),e.flags|=1,ke(t,e,r,n),e.child;case 14:return r=e.type,s=Ye(r,e.pendingProps),s=Ye(r.type,s),fu(t,e,r,s,n);case 15:return Fd(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ye(r,s),zs(t,e),e.tag=1,Oe(r)?(t=!0,Zs(e)):t=!1,Vn(e,n),zd(e,r,s),Jo(e,r,s,n),Xo(null,e,r,!0,t,n);case 19:return qd(t,e,n);case 22:return Wd(t,e,n)}throw Error(b(156,e.tag))};function uh(t,e){return Lc(t,e)}function tg(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fe(t,e,n,r){return new tg(t,e,n,r)}function cl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ng(t){if(typeof t=="function")return cl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ra)return 11;if(t===Oa)return 14}return 2}function Wt(t,e){var n=t.alternate;return n===null?(n=Fe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fs(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")cl(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cn:return ln(n.children,s,i,e);case ja:o=8,s|=8;break;case wo:return t=Fe(12,n,e,s|2),t.elementType=wo,t.lanes=i,t;case _o:return t=Fe(13,n,e,s),t.elementType=_o,t.lanes=i,t;case So:return t=Fe(19,n,e,s),t.elementType=So,t.lanes=i,t;case wc:return Ci(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yc:o=10;break e;case vc:o=9;break e;case Ra:o=11;break e;case Oa:o=14;break e;case jt:o=16,r=null;break e}throw Error(b(130,t==null?t:typeof t,""))}return e=Fe(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ln(t,e,n,r){return t=Fe(7,t,r,e),t.lanes=n,t}function Ci(t,e,n,r){return t=Fe(22,t,r,e),t.elementType=wc,t.lanes=n,t.stateNode={isHidden:!1},t}function oo(t,e,n){return t=Fe(6,t,null,e),t.lanes=n,t}function ao(t,e,n){return e=Fe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function rg(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mi(0),this.expirationTimes=Mi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dl(t,e,n,r,s,i,o,a,l){return t=new rg(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Fe(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ga(i),t}function sg(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ch(t){if(!t)return Ht;t=t._reactInternals;e:{if(gn(t)!==t||t.tag!==1)throw Error(b(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Oe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(b(171))}if(t.tag===1){var n=t.type;if(Oe(n))return cd(t,n,e)}return e}function dh(t,e,n,r,s,i,o,a,l){return t=dl(n,r,!0,t,s,i,o,a,l),t.context=ch(null),n=t.current,r=xe(),s=Ft(n),i=vt(r,s),i.callback=e??null,Bt(n,i,s),t.current.lanes=s,ts(t,s,r),Pe(t,r),t}function ji(t,e,n,r){var s=e.current,i=xe(),o=Ft(s);return n=ch(n),e.context===null?e.context=n:e.pendingContext=n,e=vt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bt(s,e,o),t!==null&&(rt(t,s,o,i),Ls(t,s,o)),o}function hi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Eu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hl(t,e){Eu(t,e),(t=t.alternate)&&Eu(t,e)}function ig(){return null}var hh=typeof reportError=="function"?reportError:function(t){console.error(t)};function fl(t){this._internalRoot=t}Ri.prototype.render=fl.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(b(409));ji(t,e,null,null)};Ri.prototype.unmount=fl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fn(function(){ji(null,t,null,null)}),e[_t]=null}};function Ri(t){this._internalRoot=t}Ri.prototype.unstable_scheduleHydration=function(t){if(t){var e=Wc();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pt.length&&e!==0&&e<Pt[n].priority;n++);Pt.splice(n,0,t),n===0&&Hc(t)}};function pl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tu(){}function og(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=hi(o);i.call(u)}}var o=dh(e,r,t,0,null,!1,!1,"",Tu);return t._reactRootContainer=o,t[_t]=o.current,Ur(t.nodeType===8?t.parentNode:t),fn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=hi(l);a.call(u)}}var l=dl(t,0,!1,null,null,!1,!1,"",Tu);return t._reactRootContainer=l,t[_t]=l.current,Ur(t.nodeType===8?t.parentNode:t),fn(function(){ji(e,l,n,r)}),l}function Pi(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=hi(o);a.call(l)}}ji(e,o,t,s)}else o=og(n,e,t,s,r);return hi(o)}Mc=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gr(e.pendingLanes);n!==0&&(Ia(e,n|1),Pe(e,re()),!(M&6)&&(Zn=re()+500,Gt()))}break;case 13:fn(function(){var r=St(t,1);if(r!==null){var s=xe();rt(r,t,1,s)}}),hl(t,1)}};$a=function(t){if(t.tag===13){var e=St(t,134217728);if(e!==null){var n=xe();rt(e,t,134217728,n)}hl(t,134217728)}};Fc=function(t){if(t.tag===13){var e=Ft(t),n=St(t,e);if(n!==null){var r=xe();rt(n,t,e,r)}hl(t,e)}};Wc=function(){return V};Vc=function(t,e){var n=V;try{return V=t,e()}finally{V=n}};Po=function(t,e,n){switch(e){case"input":if(bo(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Si(r);if(!s)throw Error(b(90));Sc(r),bo(r,s)}}}break;case"textarea":xc(t,n);break;case"select":e=n.value,e!=null&&Bn(t,!!n.multiple,e,!1)}};Oc=al;Pc=fn;var ag={usingClientEntryPoint:!1,Events:[rs,Pn,Si,jc,Rc,al]},dr={findFiberByHostInstance:nn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lg={bundleType:dr.bundleType,version:dr.version,rendererPackageName:dr.rendererPackageName,rendererConfig:dr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$c(t),t===null?null:t.stateNode},findFiberByHostInstance:dr.findFiberByHostInstance||ig,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ks.isDisabled&&ks.supportsFiber)try{yi=ks.inject(lg),ct=ks}catch{}}Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ag;Ue.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pl(e))throw Error(b(200));return sg(t,e,null,n)};Ue.createRoot=function(t,e){if(!pl(t))throw Error(b(299));var n=!1,r="",s=hh;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=dl(t,1,!1,null,null,n,!1,r,s),t[_t]=e.current,Ur(t.nodeType===8?t.parentNode:t),new fl(e)};Ue.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(b(188)):(t=Object.keys(t).join(","),Error(b(268,t)));return t=$c(e),t=t===null?null:t.stateNode,t};Ue.flushSync=function(t){return fn(t)};Ue.hydrate=function(t,e,n){if(!Oi(e))throw Error(b(200));return Pi(null,t,e,!0,n)};Ue.hydrateRoot=function(t,e,n){if(!pl(t))throw Error(b(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=hh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=dh(e,null,t,1,n??null,s,!1,i,o),t[_t]=e.current,Ur(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ri(e)};Ue.render=function(t,e,n){if(!Oi(e))throw Error(b(200));return Pi(null,t,e,!1,n)};Ue.unmountComponentAtNode=function(t){if(!Oi(t))throw Error(b(40));return t._reactRootContainer?(fn(function(){Pi(null,null,t,!1,function(){t._reactRootContainer=null,t[_t]=null})}),!0):!1};Ue.unstable_batchedUpdates=al;Ue.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Oi(n))throw Error(b(200));if(t==null||t._reactInternals===void 0)throw Error(b(38));return Pi(t,e,n,!1,r)};Ue.version="18.3.1-next-f1338f8080-20240426";function fh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fh)}catch(t){console.error(t)}}fh(),fc.exports=Ue;var ug=fc.exports,Cu=ug;yo.createRoot=Cu.createRoot,yo.hydrateRoot=Cu.hydrateRoot;const ju={admin:{label:"Admin",color:"#f59e0b",icon:""},operator:{label:"Operator",color:"#3b82f6",icon:""},viewer:{label:"Viewer",color:"#8b8fa3",icon:""}},xs={reuse:{label:"REUSE",color:"#3b82f6",icon:"",bg:"rgba(59,130,246,0.12)"},scrap:{label:"SCRAP",color:"#ef4444",icon:"",bg:"rgba(239,68,68,0.12)"},rework:{label:"REWORK",color:"#f59e0b",icon:"",bg:"rgba(245,158,11,0.12)"}},cg=[{id:"list",label:"List View",icon:""},{id:"graph",label:"Graph",icon:""},{id:"kanban",label:"Kanban",icon:""}],dg={bg:"#0f1117",bgCard:"#1a1d27",bgHover:"#242836",bgModal:"#1e2130",border:"#2a2e3d",borderLight:"#353a4d",text:"#e2e4eb",textMuted:"#8b8fa3",textDim:"#5c6078",accent:"#f59e0b",headerBg:"#161822",shadow:"0 8px 32px rgba(0,0,0,0.5)"},hg={bg:"#f3f4f6",bgCard:"#ffffff",bgHover:"#f9fafb",bgModal:"#ffffff",border:"#e5e7eb",borderLight:"#d1d5db",text:"#111827",textMuted:"#6b7280",textDim:"#9ca3af",accent:"#d97706",headerBg:"#ffffff",shadow:"0 8px 32px rgba(0,0,0,0.1)"};function bt(t){return t?dg:hg}const L="'JetBrains Mono', 'Fira Code', monospace",ph="'Noto Sans', 'Segoe UI', sans-serif",fg="1mUhNDzucbHpS2y-IYu3A5ML1x5I_opUeNnqqyOtg95M",pg="AIzaSyDbMwLumg50L4adGKrYqKyFqaYMMZhcPoI",gg=`https://sheets.googleapis.com/v4/spreadsheets/${fg}/values`,gl={"00_GHOST":{tag:"GST_assy",name:"Ghost (Full Robot)",icon:"",color:"#f59e0b",dataStart:2,snCol:1,fields:{assembler:4,time:5,completionDate:6,notes:7},components:{17:"MBB",19:"PLR",21:"HBD",23:"ARM",25:"DPK"}},"01_L-motor":{tag:"LAC_assy",name:"L-Motor",icon:"",color:"#6366f1",dataStart:2,snCol:1,fields:{mod:2,usage:3,partsDate:6,assembler:7,time:8,completionDate:9,notes:10},ecnStart:17},"02_A12-motor":{tag:"A12_assy",name:"A12 Motor",icon:"",color:"#0ea5e9",dataStart:2,snCol:1,fields:{usage:2,partsDate:5,assembler:6,time:7,completionDate:8,notes:9},ecnStart:15},"03_A35-motor":{tag:"A35_assy",name:"A35 Motor",icon:"",color:"#14b8a6",dataStart:2,snCol:1,fields:{usage:2,partsDate:5,assembler:6,time:7,completionDate:8,notes:9},ecnStart:18},"04_A4-motor":{tag:"A4A_assy",name:"A4 Motor",icon:"",color:"#a855f7",dataStart:2,snCol:1,fields:{usage:2,partsDate:5,assembler:6,time:7,completionDate:8,notes:9},ecnStart:18},"05_Mobile Base":{tag:"MBB_assy",name:"Mobile Base",icon:"",color:"#8b5cf6",dataStart:2,snCol:1,fields:{usage:2,partsDate:5,assembler:6,time:7,completionDate:8,notes:9},ecnStart:24},"06_Pillar":{tag:"PLR_assy",name:"Pillar",icon:"",color:"#ec4899",dataStart:2,snCol:1,fields:{partsDate:4,assembler:5,time:6,completionDate:7,notes:8},ecnStart:18},"07_Head & Body":{tag:"HBD_assy",name:"Head & Body",icon:"",color:"#f59e0b",dataStart:2,snCol:1,fields:{usage:2,partsDate:5,assembler:6,time:7,completionDate:8,notes:9},ecnStart:22},"08_Gripper":{tag:"GPR_assy",name:"Gripper",icon:"",color:"#22c55e",dataStart:2,snCol:1,fields:{usage:2,partsDate:5,assembler:6,time:7,completionDate:8,notes:9},ecnStart:15},"09_Arm":{tag:"ARM_assy",name:"Arm",icon:"",color:"#3b82f6",dataStart:2,snCol:1,fields:{partsDate:4,assembler:7,time:8,completionDate:9,notes:10},ecnStart:31,motorCols:{13:"A1",15:"A2",17:"A3",19:"A4",21:"A5",23:"GPR"}},"10_Deploy Kit":{tag:"DPK_assy",name:"Deploy Kit",icon:"",color:"#f97316",dataStart:2,snCol:1,fields:{partsDate:4,assembler:6,time:7,completionDate:8,notes:9},ecnStart:12}},ut={data:{},timestamp:{},TTL:5*60*1e3};function mg(t){return ut.data[t]&&Date.now()-ut.timestamp[t]<ut.TTL}async function ml(t){if(mg(t))return ut.data[t];try{const e=`${gg}/${encodeURIComponent(t)}?key=${pg}&majorDimension=ROWS&valueRenderOption=UNFORMATTED_VALUE`,n=await fetch(e);if(!n.ok){const i=await n.json().catch(()=>({}));return console.error(`Google Sheets error for "${t}":`,i),null}const s=(await n.json()).values||[];return ut.data[t]=s,ut.timestamp[t]=Date.now(),s}catch(e){return console.error(`Failed to fetch sheet "${t}":`,e),null}}function Te(t,e){if(!t||e>=t.length)return null;const n=t[e];return n===""||n===null||n===void 0?null:n}function gh(t){if(!t)return!1;const e=String(t);return e.startsWith("GT")||e.startsWith("FX")}function yg(t){if(t==null||t==="")return null;const e=String(t).toLowerCase();return e==="true"||e==="1"?"applied":e==="false"||e==="0"?"pending":e.includes("")?"not_required":e===""?"unknown":"partial"}async function vg(){const t=[];for(const[e,n]of Object.entries(gl)){const r=await ml(e);let s=0;if(r)for(let i=n.dataStart;i<r.length;i++)gh(Te(r[i],n.snCol))&&s++;t.push({id:n.tag.replace("_assy",""),tag:n.tag,name:n.name,icon:n.icon,color:n.color,description:`${e}  ${s} units`,unitCount:s,outdatedCount:0,version:"1.0",sheetName:e})}return t}async function Ru(t){const e=gl[t];if(!e)return[];const n=await ml(t);if(!n)return[];const r=[];if(e.ecnStart){const i=n[0]||[];for(let o=e.ecnStart;o<i.length;o++){const a=Te(i,o);a&&String(a).includes("ECN")&&r.push({col:o,name:String(a).replace(/\n/g," ")})}}const s=[];for(let i=e.dataStart;i<n.length;i++){const o=n[i],a=Te(o,e.snCol);if(!gh(a))continue;const l=e.fields,u={};let c=0;for(const d of r){const m=yg(Te(o,d.col));m&&(u[d.name]={status:m,rawValue:String(Te(o,d.col)||"")},m==="pending"&&c++)}const h={};if(e.components)for(const[d,m]of Object.entries(e.components)){const w=Te(o,parseInt(d));w&&String(w).startsWith("GT")&&(h[m]=String(w))}if(e.motorCols)for(const[d,m]of Object.entries(e.motorCols)){const w=Te(o,parseInt(d));w&&String(w).startsWith("GT")&&(h[m]=String(w))}s.push({sn:String(a),usage:l.usage?String(Te(o,l.usage)||""):"",assembler:l.assembler?String(Te(o,l.assembler)||""):"",assemblyTime:l.time?Te(o,l.time):null,completionDate:l.completionDate?Te(o,l.completionDate):null,partsDate:l.partsDate?Te(o,l.partsDate):null,notes:l.notes?String(Te(o,l.notes)||""):"",ecnStatuses:u,pendingEcns:c,components:h,version:"1.0",latestVersion:"1.0",status:c>0?"outdated":"current"})}return s}async function wg(t){const e=gl[t];if(!e||!e.ecnStart)return[];const n=await ml(t);if(!n||n.length===0)return[];const r=n[0]||[],s=[];for(let i=e.ecnStart;i<r.length;i++){const o=Te(r,i);if(o){const a=String(o).replace(/\n/g," ");(a.includes("ECN")||a.includes("ecn"))&&s.push({col:i,name:a,code:a.split(" ")[0]})}}return s}function mh(t){t?(delete ut.data[t],delete ut.timestamp[t]):(ut.data={},ut.timestamp={})}function _g(){return!0}function Sg({dark:t,role:e,onSelectType:n,onGoAdmin:r}){const s=bt(t),[i,o]=W.useState([]),[a,l]=W.useState(!0),[u,c]=W.useState(null);return W.useEffect(()=>{(async()=>{l(!0);try{_g();const d=await vg();o(d)}catch(d){c(d.message)}l(!1)})()},[]),g.jsxs("div",{style:{padding:"48px 24px",maxWidth:960,margin:"0 auto"},children:[g.jsxs("div",{style:{textAlign:"center",marginBottom:44},children:[g.jsx("div",{style:{fontSize:40,fontWeight:800,color:s.accent,fontFamily:L,letterSpacing:-1},children:" EagleEye"}),g.jsx("div",{style:{fontSize:14,color:s.textMuted,marginTop:6},children:"Assembly version tracking & ECN management"})]}),g.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center",marginBottom:36},children:[g.jsxs("div",{style:{padding:"14px 28px",borderRadius:12,background:`${s.accent}15`,border:`2px solid ${s.accent}`},children:[g.jsx("div",{style:{fontSize:14,fontWeight:700,color:s.accent},children:" Unit Tracking"}),g.jsx("div",{style:{fontSize:11,color:s.textMuted,marginTop:2},children:"Live from Google Sheets"})]}),e==="admin"&&g.jsxs("div",{onClick:r,style:{padding:"14px 28px",borderRadius:12,background:s.bgCard,border:`1px solid ${s.border}`,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:d=>{d.currentTarget.style.borderColor="#8b5cf6"},onMouseLeave:d=>{d.currentTarget.style.borderColor=s.border},children:[g.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#8b5cf6"},children:" Tree Editor"}),g.jsx("div",{style:{fontSize:11,color:s.textMuted,marginTop:2},children:"Manage assembly steps"})]})]}),a&&g.jsxs("div",{style:{textAlign:"center",padding:40,color:s.textMuted},children:[g.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),g.jsx("div",{style:{fontSize:13},children:"Loading from Google Sheets..."})]}),u&&g.jsxs("div",{style:{textAlign:"center",padding:20,color:"#ef4444",background:"rgba(239,68,68,0.08)",borderRadius:10,border:"1px solid rgba(239,68,68,0.15)",maxWidth:500,margin:"0 auto"},children:[g.jsx("div",{style:{fontSize:13,fontWeight:600},children:" Configuration needed"}),g.jsx("div",{style:{fontSize:11,marginTop:4,lineHeight:1.5},children:u}),g.jsxs("div",{style:{fontSize:10,marginTop:8,color:s.textMuted,textAlign:"left",fontFamily:L,padding:"8px 12px",background:s.bg,borderRadius:6},children:["1. Go to console.cloud.google.com",g.jsx("br",{}),'2. Enable "Google Sheets API"',g.jsx("br",{}),"3. Create an API key",g.jsx("br",{}),"4. Add to .env: VITE_GOOGLE_SHEETS_API_KEY=your_key"]})]}),!a&&!u&&g.jsxs(g.Fragment,{children:[g.jsx("div",{style:{marginBottom:10,fontSize:11,fontWeight:600,color:s.textMuted,textTransform:"uppercase",letterSpacing:1},children:"Full Robot"}),g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(200px,1fr))",gap:10,marginBottom:24},children:i.filter(d=>d.tag==="GST_assy").map(h)}),g.jsx("div",{style:{marginBottom:10,fontSize:11,fontWeight:600,color:s.textMuted,textTransform:"uppercase",letterSpacing:1},children:"Major Assemblies"}),g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(170px,1fr))",gap:10,marginBottom:24},children:i.filter(d=>["MBB_assy","PLR_assy","HBD_assy","ARM_assy","GPR_assy","DPK_assy"].includes(d.tag)).map(h)}),g.jsx("div",{style:{marginBottom:10,fontSize:11,fontWeight:600,color:s.textMuted,textTransform:"uppercase",letterSpacing:1},children:"Motors"}),g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(170px,1fr))",gap:10,marginBottom:24},children:i.filter(d=>["LAC_assy","A12_assy","A35_assy","A4A_assy"].includes(d.tag)).map(h)})]})]});function h(d){return g.jsxs("div",{onClick:()=>n(d),style:{background:s.bgCard,border:`1px solid ${s.border}`,borderRadius:14,padding:18,cursor:"pointer",borderLeft:`4px solid ${d.color}`,transition:"all 0.15s"},onMouseEnter:m=>{m.currentTarget.style.transform="translateY(-2px)",m.currentTarget.style.boxShadow=`0 6px 20px ${d.color}15`},onMouseLeave:m=>{m.currentTarget.style.transform="none",m.currentTarget.style.boxShadow="none"},children:[g.jsx("div",{style:{fontSize:28,marginBottom:8},children:d.icon}),g.jsx("div",{style:{fontSize:15,fontWeight:700,color:s.text},children:d.name}),g.jsxs("div",{style:{display:"flex",gap:5,marginTop:8,flexWrap:"wrap"},children:[g.jsxs("span",{style:{fontSize:10,fontWeight:700,padding:"2px 8px",borderRadius:8,background:`${d.color}15`,color:d.color,fontFamily:L},children:[d.unitCount," units"]}),d.outdatedCount>0&&g.jsxs("span",{style:{fontSize:10,fontWeight:700,padding:"2px 8px",borderRadius:8,background:"rgba(239,68,68,0.1)",color:"#ef4444",fontFamily:L},children:[d.outdatedCount," pending"]})]})]},d.tag)}}function kg({dark:t,assemblyType:e,onBack:n,onProceed:r}){const s=bt(t),[i,o]=W.useState([]),[a,l]=W.useState(!0),[u,c]=W.useState(new Set),[h,d]=W.useState("all"),[m,w]=W.useState("");W.useEffect(()=>{(async()=>{l(!0);const p=await Ru(e.sheetName);o(p),l(!1)})()},[e.sheetName]);const _=async()=>{l(!0),mh(e.sheetName);const p=await Ru(e.sheetName);o(p),l(!1)},k=i.filter(p=>!(h==="pending"&&p.pendingEcns===0||h==="clear"&&p.pendingEcns>0||m&&!p.sn.toLowerCase().includes(m.toLowerCase()))),y=p=>{const v=new Set(u);v.has(p)?v.delete(p):v.add(p),c(v)},f=i.filter(p=>p.pendingEcns>0).length;return g.jsxs("div",{style:{padding:"28px 24px",maxWidth:1e3,margin:"0 auto"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:24,flexWrap:"wrap"},children:[g.jsx("button",{onClick:n,style:{background:"none",border:`1px solid ${s.border}`,borderRadius:8,padding:"6px 14px",color:s.textMuted,cursor:"pointer",fontSize:13},children:" Back"}),g.jsx("span",{style:{fontSize:26},children:e.icon}),g.jsxs("div",{style:{flex:1},children:[g.jsx("div",{style:{fontSize:20,fontWeight:700,color:s.text},children:e.name}),g.jsx("div",{style:{fontSize:12,color:s.textMuted},children:a?"Loading from Google Sheets...":g.jsxs(g.Fragment,{children:[i.length," total  ",g.jsxs("span",{style:{color:f>0?"#ef4444":"#22c55e",fontWeight:600},children:[f," with pending ECNs"]})]})})]}),g.jsx("button",{onClick:_,disabled:a,style:{background:s.bgCard,border:`1px solid ${s.border}`,borderRadius:8,padding:"6px 12px",cursor:a?"wait":"pointer",color:s.textMuted,fontSize:12,display:"flex",alignItems:"center",gap:4},children:" Refresh"}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:9,color:"#22c55e",fontFamily:L},children:[g.jsx("span",{style:{width:5,height:5,borderRadius:"50%",background:"#22c55e",animation:"pulse 2s infinite"}}),"SHEETS LIVE"]})]}),a?g.jsxs("div",{style:{textAlign:"center",padding:40,color:s.textMuted},children:[g.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),g.jsx("div",{style:{fontSize:13},children:"Fetching from Google Sheets..."})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{display:"flex",gap:8,marginBottom:14,flexWrap:"wrap",alignItems:"center"},children:[g.jsx("input",{value:m,onChange:p=>w(p.target.value),placeholder:"Search S/N...",style:{padding:"7px 12px",borderRadius:8,border:`1px solid ${s.border}`,background:s.bgCard,color:s.text,fontSize:12,width:180,outline:"none",fontFamily:L}}),["all","pending","clear"].map(p=>g.jsx("button",{onClick:()=>d(p),style:{padding:"5px 12px",borderRadius:8,fontSize:11,fontWeight:600,cursor:"pointer",border:h===p?"none":`1px solid ${s.border}`,background:h===p?p==="pending"?"rgba(239,68,68,0.15)":p==="clear"?"rgba(34,197,94,0.15)":`${s.accent}20`:"transparent",color:h===p?p==="pending"?"#ef4444":p==="clear"?"#22c55e":s.accent:s.textMuted},children:p==="all"?`All (${i.length})`:p==="pending"?`Pending ECN (${f})`:`Clear (${i.length-f})`},p)),g.jsxs("button",{onClick:()=>{const p=new Set(u);k.forEach(v=>p.add(v.sn)),c(p)},style:{padding:"5px 12px",borderRadius:8,fontSize:11,fontWeight:600,cursor:"pointer",border:`1px solid ${s.border}`,background:"transparent",color:s.textMuted,marginLeft:"auto"},children:["Select all (",k.length,")"]})]}),i.length===0?g.jsxs("div",{style:{textAlign:"center",padding:40,color:s.textMuted,background:s.bgCard,borderRadius:12,border:`1px solid ${s.border}`},children:[g.jsx("div",{style:{fontSize:18,marginBottom:8},children:""}),g.jsxs("div",{style:{fontSize:13},children:['No units found in sheet "',e.sheetName,'"']})]}):g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(185px,1fr))",gap:6,maxHeight:420,overflowY:"auto",padding:2},children:k.map(p=>{const v=u.has(p.sn),E=p.pendingEcns>0;return g.jsxs("div",{onClick:()=>y(p.sn),style:{padding:"10px 12px",borderRadius:9,cursor:"pointer",border:v?`2px solid ${e.color}`:`1px solid ${s.border}`,background:v?`${e.color}10`:s.bgCard,transition:"all 0.1s",position:"relative"},children:[v&&g.jsx("div",{style:{position:"absolute",top:6,right:8,fontSize:13,color:e.color},children:""}),g.jsx("div",{style:{fontSize:12,fontWeight:700,color:s.text,fontFamily:L},children:p.sn}),g.jsx("div",{style:{display:"flex",gap:4,marginTop:4,flexWrap:"wrap"},children:E?g.jsxs("span",{style:{fontSize:9,fontWeight:700,padding:"2px 6px",borderRadius:6,background:"rgba(239,68,68,0.12)",color:"#ef4444",fontFamily:L},children:[p.pendingEcns," ECN pending"]}):g.jsx("span",{style:{fontSize:9,fontWeight:700,padding:"2px 6px",borderRadius:6,background:"rgba(34,197,94,0.12)",color:"#22c55e",fontFamily:L},children:" clear"})}),p.assembler&&g.jsx("div",{style:{fontSize:9,color:s.textDim,marginTop:3},children:p.assembler}),p.completionDate&&g.jsx("div",{style:{fontSize:8,color:s.textDim},children:String(p.completionDate).split("T")[0]})]},p.sn)})}),u.size>0&&g.jsxs("div",{style:{marginTop:16,padding:"12px 18px",borderRadius:12,background:`${e.color}12`,border:`1px solid ${e.color}30`,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[g.jsxs("span",{style:{fontWeight:700,color:s.text,fontSize:13},children:[u.size," selected"]}),g.jsxs("div",{style:{display:"flex",gap:8},children:[g.jsx("button",{onClick:()=>c(new Set),style:{padding:"8px 16px",borderRadius:8,fontSize:12,background:"transparent",border:`1px solid ${s.border}`,color:s.textMuted,cursor:"pointer"},children:"Clear"}),g.jsx("button",{onClick:()=>r([...u].map(p=>i.find(v=>v.sn===p)).filter(Boolean)),style:{padding:"9px 24px",borderRadius:10,fontSize:13,fontWeight:700,background:e.color,border:"none",color:"#000",cursor:"pointer"},children:"Open Assembly View "})]})]})]})]})}const xg="modulepreload",bg=function(t){return"/Eagle_eye_view_app_advanced/"+t},Ou={},Eg=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=bg(l),l in Ou)return;Ou[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":xg,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((d,m)=>{h.addEventListener("load",d),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function Ai(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Tg(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}const Cg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class yl extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class jg extends yl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Pu extends yl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Au extends yl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ca;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ca||(ca={}));class Rg{constructor(e,{headers:n={},customFetch:r,region:s=ca.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Cg(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Tg(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:a,method:l,body:u,signal:c,timeout:h}=r;let d={},{region:m}=r;m||(m=this.region);const w=new URL(`${this.url}/${n}`);m&&m!=="any"&&(d["x-region"]=m,w.searchParams.set("forceFunctionRegion",m));let _;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",_=u):typeof u=="string"?(d["Content-Type"]="text/plain",_=u):typeof FormData<"u"&&u instanceof FormData?_=u:(d["Content-Type"]="application/json",_=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?_=JSON.stringify(u):_=u;let k=c;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),c?(k=o.signal,c.addEventListener("abort",()=>o.abort())):k=o.signal);const y=yield this.fetch(w.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:_,signal:k}).catch(E=>{throw new jg(E)}),f=y.headers.get("x-relay-error");if(f&&f==="true")throw new Pu(y);if(!y.ok)throw new Au(y);let p=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),v;return p==="application/json"?v=yield y.json():p==="application/octet-stream"||p==="application/pdf"?v=yield y.blob():p==="text/event-stream"?v=y:p==="multipart/form-data"?v=yield y.formData():v=yield y.text(),{data:v,error:null,response:y}}catch(a){return{data:null,error:a,response:a instanceof Au||a instanceof Pu?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var Og=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Pg=class{constructor(t){var e,n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=t.urlLengthLimit)!==null&&r!==void 0?r:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,u=i.status,c=i.statusText;if(i.ok){var h,d;if(n.method!=="HEAD"){var m;const y=await i.text();y===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((m=n.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?a=y:a=JSON.parse(y))}const _=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),k=(d=i.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");_&&k&&k.length>1&&(l=parseInt(k[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,c="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var w;const _=await i.text();try{o=JSON.parse(_),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,c="OK")}catch{i.status===404&&_===""?(u=204,c="No Content"):o={message:_}}if(o&&n.isMaybeSingle&&(!(o==null||(w=o.details)===null||w===void 0)&&w.includes("0 rows"))&&(o=null,u=200,c="OK"),o&&n.shouldThrowOnError)throw new Og(o)}return{error:o,data:a,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="",l="",u="";const c=i==null?void 0:i.cause;if(c){var h,d,m,w;const y=(h=c==null?void 0:c.message)!==null&&h!==void 0?h:"",f=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";a=`${(m=i==null?void 0:i.name)!==null&&m!==void 0?m:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(w=c==null?void 0:c.name)!==null&&w!==void 0?w:"Error"}: ${y}`,f&&(a+=` (${f})`),c!=null&&c.stack&&(a+=`
${c.stack}`)}else{var _;a=(_=i==null?void 0:i.stack)!==null&&_!==void 0?_:""}const k=this.url.toString().length;return(i==null?void 0:i.name)==="AbortError"||(i==null?void 0:i.code)==="ABORT_ERR"?(u="",l="Request was aborted (timeout or manual cancellation)",k>this.urlLengthLimit&&(l+=`. Note: Your request URL is ${k} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((c==null?void 0:c.name)==="HeadersOverflowError"||(c==null?void 0:c.code)==="UND_ERR_HEADERS_OVERFLOW")&&(u="",l="HTTP headers exceeded server limits (typically 16KB)",k>this.urlLengthLimit&&(l+=`. Your request URL is ${k} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:l,code:u},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},Ag=class extends Pg{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Iu=new RegExp("[,()]");var xn=class extends Ag{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Iu.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Iu.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},Ig=class{constructor(t,{headers:e={},schema:n,fetch:r,urlLengthLimit:s=8e3}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),r&&l.append("Prefer",`count=${r}`),new xn({method:s,url:a,headers:l,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),n||o.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);i.searchParams.set("columns",l.join(","))}}return new xn({method:s,url:i,headers:o,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),r&&l.append("Prefer",`count=${r}`),s||l.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);a.searchParams.set("columns",c.join(","))}}return new xn({method:o,url:a,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var n;const r="PATCH",{url:s,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new xn({method:r,url:s,headers:i,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new xn({method:n,url:r,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function qr(t){"@babel/helpers - typeof";return qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(t)}function $g(t,e){if(qr(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ng(t){var e=$g(t,"string");return qr(e)=="symbol"?e:e+""}function Lg(t,e,n){return(e=Ng(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function bs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$u(Object(n),!0).forEach(function(r){Lg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$u(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Dg=class yh{constructor(e,{headers:n={},schema:r,fetch:s,timeout:i,urlLengthLimit:o=8e3}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=o;const a=s??globalThis.fetch;i!==void 0&&i>0?this.fetch=(l,u)=>{const c=new AbortController,h=setTimeout(()=>c.abort(),i),d=u==null?void 0:u.signal;if(d){if(d.aborted)return clearTimeout(h),a(l,u);const m=()=>{clearTimeout(h),c.abort()};return d.addEventListener("abort",m,{once:!0}),a(l,bs(bs({},u),{},{signal:c.signal})).finally(()=>{clearTimeout(h),d.removeEventListener("abort",m)})}return a(l,bs(bs({},u),{},{signal:c.signal})).finally(()=>clearTimeout(h))}:this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Ig(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new yh(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;const c=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(c)),h=r&&Object.values(n).some(c);h?(a="POST",u=n):r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([m,w])=>w!==void 0).map(([m,w])=>[m,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([m,w])=>{l.searchParams.append(m,w)})):(a="POST",u=n);const d=new Headers(this.headers);return h?d.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&d.set("Prefer",`count=${i}`),new xn({method:a,url:l,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class Ug{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const zg="2.97.0",Bg=`realtime-js/${zg}`,Mg="1.0.0",vh="2.0.0",Nu=vh,da=1e4,Fg=1e3,Wg=100;var Ot;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ot||(Ot={}));var ae;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ae||(ae={}));var et;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(et||(et={}));var ha;(function(t){t.websocket="websocket"})(ha||(ha={}));var en;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(en||(en={}));class Vg{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+d);let w=new DataView(m),_=0;w.setUint8(_++,this.KINDS.userBroadcastPush),w.setUint8(_++,l.length),w.setUint8(_++,a.length),w.setUint8(_++,o.length),w.setUint8(_++,u.length),w.setUint8(_++,h.length),w.setUint8(_++,n),Array.from(l,y=>w.setUint8(_++,y.charCodeAt(0))),Array.from(a,y=>w.setUint8(_++,y.charCodeAt(0))),Array.from(o,y=>w.setUint8(_++,y.charCodeAt(0))),Array.from(u,y=>w.setUint8(_++,y.charCodeAt(0))),Array.from(h,y=>w.setUint8(_++,y.charCodeAt(0)));var k=new Uint8Array(m.byteLength+r.byteLength);return k.set(new Uint8Array(m),0),k.set(new Uint8Array(r),m.byteLength),k.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,l]=r;return n({join_ref:s,ref:i,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(e.slice(l,l+s));l=l+s;const c=r.decode(e.slice(l,l+i));l=l+i;const h=r.decode(e.slice(l,l+o));l=l+o;const d=e.slice(l,e.byteLength),m=a===this.JSON_ENCODING?JSON.parse(r.decode(d)):d,w={type:this.BROADCAST_EVENT,event:c,payload:m};return o>0&&(w.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class wh{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var H;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(H||(H={}));const Lu=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=Hg(o,t,e,s),i),{}):{}},Hg=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?_h(i,o):fa(o)},_h=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Jg(e,n)}switch(t){case H.bool:return Kg(e);case H.float4:case H.float8:case H.int2:case H.int4:case H.int8:case H.numeric:case H.oid:return qg(e);case H.json:case H.jsonb:return Gg(e);case H.timestamp:return Qg(e);case H.abstime:case H.date:case H.daterange:case H.int4range:case H.int8range:case H.money:case H.reltime:case H.text:case H.time:case H.timestamptz:case H.timetz:case H.tsrange:case H.tstzrange:return fa(e);default:return fa(e)}},fa=t=>t,Kg=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},qg=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Gg=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},Jg=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>_h(e,a))}return t},Qg=t=>typeof t=="string"?t.replace(" ","T"):t,Sh=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class lo{constructor(e,n,r={},s=da){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Du;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Du||(Du={}));class jr{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jr.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=jr.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=jr.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=i[u];if(h){const d=c.map(k=>k.presence_ref),m=h.map(k=>k.presence_ref),w=c.filter(k=>m.indexOf(k.presence_ref)<0),_=h.filter(k=>d.indexOf(k.presence_ref)<0);w.length>0&&(a[u]=w),_.length>0&&(l[u]=_)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(m=>m.presence_ref),d=c.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...d)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Uu;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Uu||(Uu={}));var Rr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Rr||(Rr={}));var pt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(pt||(pt={}));class Un{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ae.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new lo(this,et.join,this.params,this.timeout),this.rejoinTimer=new wh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ae.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ae.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this._on(et.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new jr(this),this.broadcastEndpointURL=Sh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ae.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Rr.PRESENCE]&&this.bindings[Rr.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},d={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(pt.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(pt.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){e==null||e(pt.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,k=(w=_==null?void 0:_.length)!==null&&w!==void 0?w:0,y=[];for(let f=0;f<k;f++){const p=_[f],{filter:{event:v,schema:E,table:S,filter:T}}=p,x=m&&m[f];if(x&&x.event===v&&Un.isFilterValueEqual(x.schema,E)&&Un.isFilterValueEqual(x.table,S)&&Un.isFilterValueEqual(x.filter,T))y.push(Object.assign(Object.assign({},p),{id:x.id}));else{this.unsubscribe(),this.state=ae.errored,e==null||e(pt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(pt.SUBSCRIBED);return}}).receive("error",m=>{this.state=ae.errored,e==null||e(pt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(pt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ae.joined&&e===Rr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ae.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(et.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new lo(this,et.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ae.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new lo(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Wg){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=et;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let d=this._onMessage(o,n,r);if(n&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var w,_,k;return((w=m.filter)===null||w===void 0?void 0:w.event)==="*"||((k=(_=m.filter)===null||_===void 0?void 0:_.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(m=>m.callback(d,r)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var w,_,k,y,f,p;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const v=m.id,E=(w=m.filter)===null||w===void 0?void 0:w.event;return v&&((_=n.ids)===null||_===void 0?void 0:_.includes(v))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const v=(f=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return v==="*"||v===((p=n==null?void 0:n.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof d=="object"&&"ids"in d){const w=d.data,{schema:_,table:k,commit_timestamp:y,type:f,errors:p}=w;d=Object.assign(Object.assign({},{schema:_,table:k,commit_timestamp:y,eventType:f,new:{},old:{},errors:p}),this._getPayloadRecords(w))}m.callback(d,r)})}_isClosed(){return this.state===ae.closed}_isJoined(){return this.state===ae.joined}_isJoining(){return this.state===ae.joining}_isLeaving(){return this.state===ae.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Un.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(et.close,{},e)}_onError(e){this._on(et.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ae.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Lu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Lu(e.columns,e.old_record)),n}}const uo=()=>{},Es={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Yg=[1e3,2e3,5e3,1e4],Xg=1e4,Zg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class em{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=da,this.transport=null,this.heartbeatIntervalMs=Es.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=uo,this.ref=0,this.reconnectTimer=null,this.vsn=Nu,this.logger=uo,this.conn=null,this.sendBuffer=[],this.serializer=new Vg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${ha.websocket}`,this.httpEndpoint=Sh(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ug.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ot.connecting:return en.Connecting;case Ot.open:return en.Open;case Ot.closing:return en.Closing;default:return en.Closed}}isConnected(){return this.connectionState()===en.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Un(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Fg,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Es.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(c){this.log("error","error in heartbeat callback",c)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ot.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ot.open||this.conn.readyState===Ot.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(et.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Zg],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:Bg};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(et.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new wh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Es.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,l,u,c,h,d,m;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:da,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Es.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:uo,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Nu,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:w=>Yg[w-1]||Xg,this.vsn){case Mg:this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(w,_)=>_(JSON.stringify(w)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(w,_)=>_(JSON.parse(w));break;case vh:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:this.serializer.encode.bind(this.serializer),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Gr=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function tm(t,e,n){const r=new URL(e,t);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function nm(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function rm(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const a=tm(t.baseUrl,r,s),l=await nm(t.auth),u=await e(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),c=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),d=h&&c?JSON.parse(c):c;if(!u.ok){const m=h?d:void 0,w=m==null?void 0:m.error;throw new Gr((w==null?void 0:w.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:m})}return{status:u.status,headers:u.headers,data:d}}}}function Ts(t){return t.join("")}var sm=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ts(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ts(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ts(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ts(t.namespace)}`}),!0}catch(e){if(e instanceof Gr&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Gr&&n.status===409)return;throw n}}};function yn(t){return t.join("")}var im=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${yn(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${yn(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${yn(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${yn(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${yn(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${yn(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Gr&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Gr&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},om=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=rm({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new sm(this.client,e),this.tableOps=new im(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Ii=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function $i(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Cs=class extends Ii{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},kh=class extends Ii{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const am=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),lm=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},pa=t=>{if(Array.isArray(t))return t.map(n=>pa(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=pa(r)}),e},um=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Jr(t){"@babel/helpers - typeof";return Jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jr(t)}function cm(t,e){if(Jr(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dm(t){var e=cm(t,"string");return Jr(e)=="symbol"?e:e+""}function hm(t,e,n){return(e=dm(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zu(Object(n),!0).forEach(function(r){hm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zu(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Bu=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},fm=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t,i=s.status||500;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new Cs(Bu(o),i,a,r))}).catch(()=>{if(r==="vectors"){const o=i+"";e(new Cs(s.statusText||`HTTP ${i} error`,i,o,r))}else{const o=i+"";e(new Cs(s.statusText||`HTTP ${i} error`,i,o,r))}});else{const o=i+"";e(new Cs(s.statusText||`HTTP ${i} error`,i,o,r))}}else e(new kh(Bu(t),t,r))},pm=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!r?A(A({},s),n):(lm(r)?(s.headers=A({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),A(A({},s),n))};async function hr(t,e,n,r,s,i,o){return new Promise((a,l)=>{t(n,pm(e,r,s,i)).then(u=>{if(!u.ok)throw u;if(r!=null&&r.noResolveJson)return u;if(o==="vectors"){const c=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!c||!c.includes("application/json"))return{}}return u.json()}).then(u=>a(u)).catch(u=>fm(u,l,r,o))})}function xh(t="storage"){return{get:async(e,n,r,s)=>hr(e,"GET",n,r,s,void 0,t),post:async(e,n,r,s,i)=>hr(e,"POST",n,s,i,r,t),put:async(e,n,r,s,i)=>hr(e,"PUT",n,s,i,r,t),head:async(e,n,r,s)=>hr(e,"HEAD",n,A(A({},r),{},{noResolveJson:!0}),s,void 0,t),remove:async(e,n,r,s,i)=>hr(e,"DELETE",n,s,i,r,t)}}const gm=xh("storage"),{get:Qr,post:Xe,put:ga,head:mm,remove:vl}=gm,$e=xh("vectors");var rr=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=am(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=A(A({},this.headers),{},{[t]:e}),this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($i(n))return{data:null,error:n};throw n}}},ym=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if($i(e))return{data:null,error:e};throw e}}};let bh;bh=Symbol.toStringTag;var vm=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[bh]="BlobDownloadBuilder",this.promise=null}asStream(){return new ym(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if($i(e))return{data:null,error:e};throw e}}};const wm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var _m=class extends rr{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var s=this;return s.handleOperation(async()=>{let i;const o=A(A({},Mu),r);let a=A(A({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=A(A({},a),r.headers));const u=s._removeEmptyFolders(e),c=s._getFinalPath(u),h=await(t=="PUT"?ga:Xe)(s.fetch,`${s.url}/object/${c}`,i,A({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:h.Id,fullPath:h.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const i=s._removeEmptyFolders(t),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);return a.searchParams.set("token",e),s.handleOperation(async()=>{let l;const u=A({upsert:Mu.upsert},r),c=A(A({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{path:i,fullPath:(await ga(s.fetch,a.toString(),l,{headers:c})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const s=A({},n.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await Xe(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(n.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ii("No token returned by API");return{signedUrl:o.toString(),path:t,token:a}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await Xe(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await Xe(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(t),i=await Xe(r.fetch,`${r.url}/object/sign/${s}`,A({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const s=await Xe(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s.map(o=>A(A({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null}))})}download(t,e,n){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=s?`?${s}`:"",o=this._getFinalPath(t),a=()=>Qr(this.fetch,`${this.url}/${r}/${o}${i}`,{headers:this.headers,noResolveJson:!0},n);return new vm(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>pa(await Qr(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await mm(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if($i(r)&&r instanceof kh){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await vl(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const s=A(A(A({},wm),e),{},{prefix:t||""});return await Xe(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=A({},t);return await Xe(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Sm="2.97.0",is={"X-Client-Info":`storage-js/${Sm}`};var km=class extends rr{constructor(t,e={},n,r){const s=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),o=A(A({},is),e);super(i,o,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await Qr(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Qr(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await Xe(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await ga(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await Xe(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await vl(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},xm=class extends rr{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=A(A({},is),e);super(r,s,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Xe(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await Qr(e.fetch,s,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await vl(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!um(t))throw new Ii("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new om({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}},bm=class extends rr{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=A(A({},is),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await $e.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await $e.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await $e.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await $e.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},Em=class extends rr{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=A(A({},is),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await $e.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await $e.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await $e.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await $e.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await $e.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},Tm=class extends rr{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=A(A({},is),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await $e.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await $e.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await $e.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await $e.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},Cm=class extends Tm{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new jm(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},jm=class extends bm{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,A(A({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,A(A({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new Rm(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Rm=class extends Em{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,A(A({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,A(A({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,A(A({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,A(A({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,A(A({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Om=class extends km{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new _m(this.url,this.headers,t,this.fetch)}get vectors(){return new Cm(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new xm(this.url+"/iceberg",this.headers,this.fetch)}};const Eh="2.97.0",bn=30*1e3,ma=3,co=ma*bn,Pm="http://localhost:9999",Am="supabase.auth.token",Im={"X-Client-Info":`gotrue-js/${Eh}`},ya="X-Supabase-Api-Version",Th={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$m=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Nm=10*60*1e3;class Yr extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function P(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Lm extends Yr{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Dm(t){return P(t)&&t.name==="AuthApiError"}class tn extends Yr{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Et extends Yr{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ae extends Et{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ho(t){return P(t)&&t.name==="AuthSessionMissingError"}class vn extends Et{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class js extends Et{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Rs extends Et{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Um(t){return P(t)&&t.name==="AuthImplicitGrantRedirectError"}class Fu extends Et{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zm extends Et{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class va extends Et{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function fo(t){return P(t)&&t.name==="AuthRetryableFetchError"}class Wu extends Et{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class wa extends Et{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const fi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Vu=` 	
\r=`.split(""),Bm=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Vu.length;e+=1)t[Vu[e].charCodeAt(0)]=-2;for(let e=0;e<fi.length;e+=1)t[fi[e].charCodeAt(0)]=e;return t})();function Hu(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(fi[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(fi[r]),e.queuedBits-=6}}function Ch(t,e,n){const r=Bm[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ku(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Wm(o,r,n)};for(let o=0;o<t.length;o+=1)Ch(t.charCodeAt(o),s,i);return e.join("")}function Mm(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Fm(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Mm(r,e)}}function Wm(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Kn(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Ch(t.charCodeAt(s),n,r);return new Uint8Array(e)}function Vm(t){const e=[];return Fm(t,n=>e.push(n)),new Uint8Array(e)}function on(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Hu(s,n,r)),Hu(null,n,r),e.join("")}function Hm(t){return Math.round(Date.now()/1e3)+t}function Km(){return Symbol("auth-callback")}const fe=()=>typeof window<"u"&&typeof document<"u",Jt={tested:!1,writable:!1},jh=()=>{if(!fe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jt.tested)return Jt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Jt.tested=!0,Jt.writable=!0}catch{Jt.tested=!0,Jt.writable=!1}return Jt.writable};function qm(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Rh=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Gm=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",En=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Qt=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},he=async(t,e)=>{await t.removeItem(e)};class Ni{constructor(){this.promise=new Ni.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ni.promiseConstructor=Promise;function Os(t){const e=t.split(".");if(e.length!==3)throw new wa("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!$m.test(e[r]))throw new wa("JWT not in base64url format");return{header:JSON.parse(Ku(e[0])),payload:JSON.parse(Ku(e[1])),signature:Kn(e[2]),raw:{header:e[0],payload:e[1]}}}async function Jm(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Qm(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Ym(t){return("0"+t.toString(16)).substr(-2)}function Xm(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Ym).join("")}async function Zm(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function ey(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Zm(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wn(t,e,n=!1){const r=Xm();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await En(t,`${e}-code-verifier`,s);const i=await ey(r);return[i,r===i?"plain":"s256"]}const ty=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ny(t){const e=t.headers.get(ya);if(!e||!e.match(ty))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ry(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function sy(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const iy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _n(t){if(!iy.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function po(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function oy(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function qu(t){return JSON.parse(JSON.stringify(t))}const Zt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ay=[502,503,504];async function Gu(t){var e;if(!Gm(t))throw new va(Zt(t),0);if(ay.includes(t.status))throw new va(Zt(t),t.status);let n;try{n=await t.json()}catch(i){throw new tn(Zt(i),i)}let r;const s=ny(t);if(s&&s.getTime()>=Th["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Wu(Zt(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ae}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Wu(Zt(n),t.status,n.weak_password.reasons);throw new Lm(Zt(n),t.status||500,r)}const ly=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function I(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[ya]||(i[ya]=Th["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await uy(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function uy(t,e,n,r,s,i){const o=ly(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new va(Zt(l),0)}if(a.ok||await Gu(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Gu(l)}}function Qe(t){var e;let n=null;hy(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Hm(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Ju(t){const e=Qe(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function It(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function cy(t){return{data:t,error:null}}function dy(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Ai(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Qu(t){return t}function hy(t){return t.access_token&&t.refresh_token&&t.expires_in}const go=["global","local","others"];class fy{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Rh(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=go[0]){if(go.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${go.join(", ")}`);try{return await I(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(P(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await I(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:It})}catch(r){if(P(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Ai(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await I(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:dy,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(P(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await I(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:It})}catch(n){if(P(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await I(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Qu});if(c.error)throw c.error;const h=await c.json(),d=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(w.split(";")[1].split("=")[1]);u[`${k}Page`]=_}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(P(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){_n(e);try{return await I(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:It})}catch(n){if(P(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){_n(e);try{return await I(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:It})}catch(r){if(P(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){_n(e);try{return await I(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:It})}catch(r){if(P(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){_n(e.userId);try{const{data:n,error:r}=await I(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(P(n))return{data:null,error:n};throw n}}async _deleteFactor(e){_n(e.userId),_n(e.id);try{return{data:await I(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(P(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await I(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Qu});if(c.error)throw c.error;const h=await c.json(),d=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(w.split(";")[1].split("=")[1]);u[`${k}Page`]=_}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(P(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await I(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(P(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await I(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(P(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await I(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(P(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await I(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(P(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await I(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(P(n))return{data:null,error:n};throw n}}}function Yu(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Sn={debug:!!(globalThis&&jh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Oh extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Xu extends Oh{}async function py(t,e,n){Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;e>0&&setTimeout(()=>{r.abort(),Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve();try{return await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Xu(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Sn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}catch(s){throw(s==null?void 0:s.name)==="AbortError"?new Xu(`Acquiring an exclusive Navigator LockManager lock "${t}" timed out waiting ${e}ms`):s}}function gy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ph(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function my(t){return parseInt(t,16)}function yy(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function vy(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:h,version:d}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const m=Ph(t.address),w=c?`${c}://${r}`:r,_=t.statement?`${t.statement}
`:"",k=`${w} wants you to sign in with your Ethereum account:
${m}

${_}`;let y=`URI: ${h}
Version: ${d}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),a&&(y+=`
Not Before: ${a.toISOString()}`),l&&(y+=`
Request ID: ${l}`),u){let f=`
Resources:`;for(const p of u){if(!p||typeof p!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${p}`);f+=`
- ${p}`}y+=f}return`${k}
${y}`}class ie extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class pi extends ie{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function wy({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ie({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ie({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ie({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ie({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ie({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ie({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ie({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ie({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Ah(o)){if(i.rp.id!==o)return new ie({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ie({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ie({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ie({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ie({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function _y({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ie({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ie({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Ah(r)){if(n.rpId!==r)return new ie({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ie({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ie({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ie({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Sy{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const ky=new Sy;function xy(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Ai(t,["challenge","user","excludeCredentials"]),i=Kn(e).buffer,o=Object.assign(Object.assign({},n),{id:Kn(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:Kn(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function by(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Ai(t,["challenge","allowCredentials"]),s=Kn(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Kn(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function Ey(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:on(new Uint8Array(t.response.attestationObject)),clientDataJSON:on(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ty(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:on(new Uint8Array(s.authenticatorData)),clientDataJSON:on(new Uint8Array(s.clientDataJSON)),signature:on(new Uint8Array(s.signature)),userHandle:s.userHandle?on(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ah(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Zu(){var t,e;return!!(fe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Cy(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new pi("Browser returned unexpected credential type",e)}:{data:null,error:new pi("Empty credential response",e)}}catch(e){return{data:null,error:wy({error:e,options:t})}}}async function jy(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new pi("Browser returned unexpected credential type",e)}:{data:null,error:new pi("Empty credential response",e)}}catch(e){return{data:null,error:_y({error:e,options:t})}}}const Ry={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Oy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function gi(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=gi(a,o):r[i]=gi(o)}else r[i]=o}return r}function Py(t,e){return gi(Ry,t,e||{})}function Ay(t,e){return gi(Oy,t,e||{})}class Iy{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){var o;try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:l};const u=s??ky.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;if(!c.name){const h=r;if(h)c.name=`${c.id}:${h}`;else{const m=(await this.client.getUser()).data.user,w=((o=m==null?void 0:m.user_metadata)===null||o===void 0?void 0:o.name)||(m==null?void 0:m.email)||(m==null?void 0:m.id)||"User";c.name=`${c.id}:${w}`}}c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=Py(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:d}=await Cy({publicKey:c,signal:u});return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}case"request":{const c=Ay(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:d}=await jy(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:u}));return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}}}catch(a){return P(a)?{data:null,error:a}:{data:null,error:new tn("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Yr("rpId is required for WebAuthn authentication")};try{if(!Zu())return{data:null,error:new tn("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return P(o)?{data:null,error:o}:{data:null,error:new tn("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Yr("rpId is required for WebAuthn registration")};try{if(!Zu())return{data:null,error:new tn("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(c=>{var h;return(h=c.data)===null||h===void 0?void 0:h.all.find(d=>d.factor_type==="webauthn"&&d.friendly_name===e&&d.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return P(o)?{data:null,error:o}:{data:null,error:new tn("Unexpected error in register",o)}}}}gy();const $y={url:Pm,storageKey:Am,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Im,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function ec(t,e,n){return await n()}const kn={};class Xr{get jwks(){var e,n;return(n=(e=kn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){kn[this.storageKey]=Object.assign(Object.assign({},kn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=kn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){kn[this.storageKey]=Object.assign(Object.assign({},kn[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},$y),e);if(this.storageKey=i.storageKey,this.instanceID=(n=Xr.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Xr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&fe()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new fy({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Rh(i.fetch),this.lock=i.lock||ec,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&fe()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=py:this.lock=ec,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Iy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:jh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Yu(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Yu(this.memoryStorage)),fe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(a){this._debug("#broadcastChannel","error",a)}})}i.skipAutoInitialize||this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Eh}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(fe()&&(n=qm(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),fe()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Um(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return P(n)?this._returnResult({error:n}):this._returnResult({error:new tn("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Qe}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(P(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:c,password:h,options:d}=e;let m=null,w=null;this.flowType==="pkce"&&([m,w]=await wn(this.storage,this.storageKey)),i=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:w},xform:Qe})}else if("phone"in e){const{phone:c,password:h,options:d}=e;i=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},channel:(s=d==null?void 0:d.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Qe})}else throw new js("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await he(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await he(this.storage,`${this.storageKey}-code-verifier`),P(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ju})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ju})}else throw new js("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new vn;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(P(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,a,l,u,c,h,d;let m,w;if("message"in e)m=e.message,w=e.signature;else{const{chain:_,wallet:k,statement:y,options:f}=e;let p;if(fe())if(typeof k=="object")p=k;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")p=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=k}const v=new URL((n=f==null?void 0:f.url)!==null&&n!==void 0?n:window.location.href),E=await p.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=Ph(E[0]);let T=(r=f==null?void 0:f.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!T){const D=await p.request({method:"eth_chainId"});T=my(D)}const x={domain:v.host,address:S,statement:y,uri:v.href,version:"1",chainId:T,nonce:(s=f==null?void 0:f.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=f==null?void 0:f.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=f==null?void 0:f.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=f==null?void 0:f.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=f==null?void 0:f.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=f==null?void 0:f.signInWithEthereum)===null||c===void 0?void 0:c.resources};m=vy(x),w=await p.request({method:"personal_sign",params:[yy(m),S]})}try{const{data:_,error:k}=await I(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:w},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:Qe});if(k)throw k;if(!_||!_.session||!_.user){const y=new vn;return this._returnResult({data:{user:null,session:null},error:y})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:k})}catch(_){if(P(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(e){var n,r,s,i,o,a,l,u,c,h,d,m;let w,_;if("message"in e)w=e.message,_=e.signature;else{const{chain:k,wallet:y,statement:f,options:p}=e;let v;if(fe())if(typeof y=="object")v=y;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))v=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=y}const E=new URL((n=p==null?void 0:p.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in v&&v.signIn){const S=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),f?{statement:f}:null));let T;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")T=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)T=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)w=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),_=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${E.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=p==null?void 0:p.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((a=p==null?void 0:p.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(c=p==null?void 0:p.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const S=await v.signMessage(new TextEncoder().encode(w),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=S}}try{const{data:k,error:y}=await I(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:on(_)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Qe});if(y)throw y;if(!k||!k.session||!k.user){const f=new vn;return this._returnResult({data:{user:null,session:null},error:f})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:y})}catch(k){if(P(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(e){const n=await Qt(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new zm;const{data:i,error:o}=await I(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Qe});if(await he(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new vn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await he(this.storage,`${this.storageKey}-code-verifier`),P(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await I(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Qe}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new vn;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(P(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await wn(this.storage,this.storageKey));const{error:h}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new js("You must provide either an email or phone number.")}catch(a){if(await he(this.storage,`${this.storageKey}-code-verifier`),P(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await I(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Qe});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(P(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await wn(this.storage,this.storageKey));const u=await I(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:cy});return!((i=u.data)===null||i===void 0)&&i.url&&fe()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await he(this.storage,`${this.storageKey}-code-verifier`),P(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ae;const{error:s}=await I(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(P(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await I(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await I(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new js("You must provide either an email or phone number and a type")}catch(n){if(P(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Qt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<co:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Qt(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=po()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=oy(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:It}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ae}:await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:It})})}catch(n){if(P(n))return ho(n)&&(await this._removeSession(),await he(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ae;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await wn(this.storage,this.storageKey));const{data:u,error:c}=await I(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:It});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await he(this.storage,`${this.storageKey}-code-verifier`),P(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ae;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Os(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(P(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ae;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(P(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!fe())throw new Rs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Rs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Fu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Rs("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Fu("No code detected.");const{data:f,error:p}=await this._exchangeCodeForSession(e.code);if(p)throw p;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new Rs("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let d=c+h;l&&(d=parseInt(l));const m=d-c;m*1e3<=bn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const w=d-h;c-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,d,c):c-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,d,c);const{data:_,error:k}=await this._getUser(i);if(k)throw k;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:d,refresh_token:o,token_type:u,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:e.type},error:null})}catch(r){if(P(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Qt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i&&!ho(i))return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Dm(a)&&(a.status===404||a.status===401||a.status===403)||ho(a)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await he(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=Km(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await wn(this.storage,this.storageKey,!0));try{return await I(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await he(this.storage,`${this.storageKey}-code-verifier`),P(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(P(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:h,error:d}=i;if(d)throw d;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await I(this.fetch,"GET",m,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return fe()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(P(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:c}=e,h=await I(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Qe}),{data:d,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!d||!d.session||!d.user?this._returnResult({data:{user:null,session:null},error:new vn}):(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:m}))}catch(s){if(await he(this.storage,`${this.storageKey}-code-verifier`),P(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await I(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(P(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Qm(async s=>(s>0&&await Jm(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await I(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Qe})),(s,i)=>{const o=200*Math.pow(2,s);return i&&fo(i)&&Date.now()+o-r<bn})}catch(r){if(this._debug(n,"error",r),P(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),fe()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Qt(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Qt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await En(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:po()}else if(s&&!s.user&&!s.user){const o=await Qt(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await he(this.storage,this.storageKey+"-user"),await En(this.storage,this.storageKey,s)):s.user=po()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<co;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${co}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),fo(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ae;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ni;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ae;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),P(i)){const o={data:null,error:i};return fo(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await he(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await En(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=qu(s);await En(this.storage,this.storageKey,i)}else{const s=qu(n);await En(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await he(this.storage,this.storageKey),await he(this.storage,this.storageKey+"-code-verifier"),await he(this.storage,this.storageKey+"-user"),this.userStorage&&await he(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&fe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),bn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/bn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${bn}ms, refresh threshold is ${ma} ticks`),s<=ma&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Oh)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await wn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await I(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(P(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await I(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(P(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Ey(e.webauthn.credential_response):Ty(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await I(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(P(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await I(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:xy(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:by(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(P(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,s,i;if(e)try{const{payload:m}=Os(e);let w=null;m.aal&&(w=m.aal);let _=w;const{data:{user:k},error:y}=await this.getUser(e);if(y)return this._returnResult({data:null,error:y});((r=(n=k==null?void 0:k.factors)===null||n===void 0?void 0:n.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(_="aal2");const p=m.amr||[];return{data:{currentLevel:w,nextLevel:_,currentAuthenticationMethods:p},error:null}}catch(m){if(P(m))return this._returnResult({data:null,error:m});throw m}const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Os(o.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(m=>m.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(c="aal2");const d=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await I(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ae})})}catch(n){if(P(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ae});const o=await I(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&fe()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ae});const o=await I(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&fe()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await I(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ae})})}catch(e){if(P(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await I(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ae})})}catch(n){if(P(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+Nm>s)return r;const{data:i,error:o}=await I(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:m,error:w}=await this.getSession();if(w||!m.session)return this._returnResult({data:null,error:w});r=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Os(r);n!=null&&n.allowExpired||ry(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const c=sy(s.alg),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,Vm(`${a}.${l}`)))throw new wa("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}}}Xr.nextInstanceID={};const Ny=Xr,Ly="2.97.0";let yr="";typeof Deno<"u"?yr="deno":typeof document<"u"?yr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yr="react-native":yr="node";const Dy={"X-Client-Info":`supabase-js-${yr}/${Ly}`},Uy={headers:Dy},zy={schema:"public"},By={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},My={};function Zr(t){"@babel/helpers - typeof";return Zr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(t)}function Fy(t,e){if(Zr(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wy(t){var e=Fy(t,"string");return Zr(e)=="symbol"?e:e+""}function Vy(t,e,n){return(e=Wy(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tc(Object(n),!0).forEach(function(r){Vy(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tc(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Hy=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ky=()=>Headers,qy=(t,e,n)=>{const r=Hy(n),s=Ky();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,ee(ee({},o),{},{headers:u}))}};function Gy(t){return t.endsWith("/")?t:t+"/"}function Jy(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:c,global:h}=e,d={db:ee(ee({},l),s),auth:ee(ee({},u),i),realtime:ee(ee({},c),o),storage:{},global:ee(ee(ee({},h),a),{},{headers:ee(ee({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}function Qy(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Gy(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Yy=class extends Ny{constructor(t){super(t)}},Xy=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const i=Qy(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:zy,realtime:My,auth:ee(ee({},By),{},{storageKey:o}),global:Uy},l=Jy(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(c,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=qy(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(ee({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new Dg(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch,timeout:l.db.timeout,urlLengthLimit:l.db.urlLengthLimit}),this.storage=new Om(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Rg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:u},c,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yy({url:this.authUrl.href,headers:ee(ee({},d),c),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new em(this.realtimeUrl.href,ee(ee({},t),{},{params:ee(ee({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Zy=(t,e,n)=>new Xy(t,e,n);function ev(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}ev()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const tv="https://wylxvmkcrexwfpjpbhyy.supabase.co",nv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind5bHh2bWtjcmV4d2ZwanBiaHl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg2MzkxMDYsImV4cCI6MjA4NDIxNTEwNn0.6Bxo42hx4jwlJGWnfjiTpiDUsYfc1QLTN3YtrU1efak",zn=Zy(tv,nv),vr={groups:"eagle_eye_app_groups",steps:"eagle_eye_app_steps",parts:"eagle_eye_app_parts",fasteners:"eagle_eye_app_fasteners"};async function Ih(t){const{data:e,error:n}=await zn.from(vr.groups).select("*").eq("assembly_id",t).order("sort_order");if(n)return console.error("fetchTree groups:",n),[];const r=e.map(h=>h.id),{data:s,error:i}=await zn.from(vr.steps).select("*").in("group_id",r).order("sort_order");if(i)return console.error("fetchTree steps:",i),[];const o=s.map(h=>h.id);let a=[];if(o.length>0){const{data:h}=await zn.from(vr.parts).select("step_id").in("step_id",o);a=h||[]}let l=[];if(o.length>0){const{data:h}=await zn.from(vr.fasteners).select("step_id").in("step_id",o);l=h||[]}const u={};a.forEach(h=>{u[h.step_id]=(u[h.step_id]||0)+1});const c={};return l.forEach(h=>{c[h.step_id]=(c[h.step_id]||0)+1}),e.map((h,d)=>({id:`g${h.id}`,dbId:h.id,name:h.label,icon:h.icon||"",color:h.color||"#8b8fa3",level:d>0?d-1:null,sortOrder:h.sort_order,steps:s.filter(m=>m.group_id===h.id).map(m=>({id:`s${m.id}`,dbId:m.id,sn:m.seq_tag||String(m.sort_order),name:m.label,type:(m.type||"step").toUpperCase(),parts:u[m.id]||0,fasteners:c[m.id]||0,sortOrder:m.sort_order,pn:m.pn,x:m.x,y:m.y,isLocked:m.is_locked,ecnStatus:m.ecn_status}))}))}async function $h(t){const e=t.map((s,i)=>zn.from(vr.steps).update({sort_order:i+1}).eq("id",s.dbId)),r=(await Promise.all(e)).filter(s=>s.error);return r.length?(console.error("saveStepOrder:",r),!1):!0}const rv=Object.freeze(Object.defineProperty({__proto__:null,fetchTree:Ih,saveStepOrder:$h,supabase:zn},Symbol.toStringTag,{value:"Module"}));function _a(t){const e=t.match(/^(\d+)/);return e?e[1]:t}function sv(t){const e=[];return t.forEach(n=>{n.steps.forEach(r=>{e.push({...r,groupId:n.id,groupName:n.name,groupColor:n.color,chain:_a(r.sn)})})}),e}function iv(t,e,n,r){const s=sv(t),i=new Set(e.map(a=>a.step)),o=new Map;return e.forEach(a=>{const l=_a(a.step);if(n.has(`${r}-${a.step}`))return;const u=s.findIndex(c=>c.sn===a.step);if(u!==-1)for(let c=u+1;c<s.length;c++){const h=s[c];if(h.chain!==l)continue;const d=o.get(h.sn)||{isCascade:!1,cascadeFrom:[],isBlocked:!1};d.isCascade=!0,d.cascadeFrom.includes(a.step)||d.cascadeFrom.push(a.step),o.set(h.sn,d)}}),e.forEach(a=>{const l=_a(a.step),u=s.findIndex(c=>c.sn===a.step);for(let c=0;c<u;c++){const h=s[c];if(h.chain===l&&i.has(h.sn)&&!n.has(`${r}-${h.sn}`)){const d=o.get(a.step)||{isCascade:!1,cascadeFrom:[],isBlocked:!1};d.isBlocked=!0,d.cascadeFrom.includes(h.sn)||d.cascadeFrom.push(h.sn),o.set(a.step,d)}}}),o}function ov({dark:t,activeTab:e,onTabChange:n,ecnCount:r,tree:s}){const i=bt(t),o=s.reduce((u,c)=>u+c.steps.reduce((h,d)=>h+d.parts,0),0),a=s.reduce((u,c)=>u+c.steps.reduce((h,d)=>h+d.fasteners,0),0),l=s.reduce((u,c)=>u+c.steps.length,0);return g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,padding:"0 20px",borderBottom:`1px solid ${i.border}`,background:i.headerBg},children:[cg.map(u=>{const c=e===u.id;return g.jsxs("button",{onClick:()=>n(u.id),style:{display:"flex",alignItems:"center",gap:6,padding:"10px 18px",fontSize:13,fontWeight:c?700:500,color:c?i.accent:i.textMuted,background:"transparent",border:"none",cursor:"pointer",borderBottom:c?`2px solid ${i.accent}`:"2px solid transparent",transition:"all 0.15s",fontFamily:ph},children:[g.jsx("span",{style:{fontSize:14,opacity:c?1:.5},children:u.icon}),u.label,u.id==="list"&&r>0&&g.jsx("span",{style:{fontSize:9,fontWeight:700,padding:"1px 6px",borderRadius:8,background:"rgba(239,68,68,0.15)",color:"#ef4444",fontFamily:L,marginLeft:2},children:r}),(u.id==="graph"||u.id==="kanban")&&g.jsx("span",{style:{fontSize:8,fontWeight:700,padding:"2px 6px",borderRadius:6,background:c?`${i.accent}20`:`${i.textDim}15`,color:c?i.accent:i.textDim,fontFamily:L,letterSpacing:.5},children:"SOON"})]},u.id)}),g.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:10,alignItems:"center",fontSize:11,color:i.textMuted},children:[g.jsxs("span",{style:{fontFamily:L},children:[g.jsx("span",{style:{color:"#22c55e",fontWeight:700},children:o})," parts"]}),g.jsxs("span",{style:{fontFamily:L},children:[g.jsx("span",{style:{color:"#ef4444",fontWeight:700},children:a})," fasteners"]}),g.jsxs("span",{style:{fontFamily:L},children:[g.jsx("span",{style:{fontWeight:700},children:l})," steps"]})]})]})}function av({dark:t,role:e,activeUnit:n,changes:r,ecnStepSet:s,cascade:i,applied:o,allEcnApplied:a,expanded:l,setExpanded:u,setShowModal:c,getGroupCascadeCount:h,tree:d,dragState:m,onDragStart:w,onDragOver:_,onDragEnd:k,onUpgrade:y}){const f=bt(t),p=n.status==="outdated";return g.jsxs(g.Fragment,{children:[p&&r.length>0&&g.jsxs("div",{style:{display:"flex",gap:16,padding:"8px 20px",borderBottom:`1px solid ${f.border}`,background:f.headerBg,fontSize:11,color:f.textMuted,alignItems:"center",flexWrap:"wrap"},children:[g.jsx("span",{style:{fontWeight:700},children:"Legend:"}),g.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[g.jsx("span",{style:{fontSize:12},children:""})," ECN change"]}),g.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[g.jsx("span",{style:{fontSize:12},children:""})," Disassembly cascade"]}),g.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[g.jsx("span",{style:{fontSize:12},children:""})," Applied"]}),g.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[g.jsx("span",{style:{fontSize:12},children:""})," Blocked"]}),g.jsx("span",{style:{width:1,height:14,background:f.border}}),g.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[g.jsx("span",{style:{fontSize:10},children:""}),g.jsx("span",{style:{color:"#3b82f6",fontWeight:600},children:"Reuse"})]}),g.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[g.jsx("span",{style:{fontSize:10},children:""}),g.jsx("span",{style:{color:"#ef4444",fontWeight:600},children:"Scrap"})]}),g.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[g.jsx("span",{style:{fontSize:10},children:""}),g.jsx("span",{style:{color:"#f59e0b",fontWeight:600},children:"Rework"})]})]}),p&&r.length>0&&g.jsxs("div",{style:{margin:"12px 20px 0",padding:"12px 16px",borderRadius:10,background:"rgba(239,68,68,0.05)",border:"1px solid rgba(239,68,68,0.12)"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[g.jsxs("span",{style:{fontSize:13,fontWeight:700,color:"#ef4444"},children:[" ",r.length," ECN changes  ",[...i.values()].filter(v=>v.isCascade).length," cascade steps"]}),g.jsxs("span",{style:{fontSize:11,color:f.textMuted},children:[[...o].filter(v=>v.startsWith(n.sn)).length,"/",r.length," applied"]})]}),g.jsx("div",{style:{height:3,borderRadius:2,background:"rgba(239,68,68,0.12)",overflow:"hidden"},children:g.jsx("div",{style:{height:"100%",borderRadius:2,transition:"width 0.3s",width:`${[...o].filter(v=>v.startsWith(n.sn)).length/r.length*100}%`,background:a?"#22c55e":"#f59e0b"}})}),g.jsx("div",{style:{marginTop:10,display:"flex",flexDirection:"column",gap:4},children:r.map((v,E)=>{var D;const S=o.has(`${n.sn}-${v.step}`),T=i.get(v.step),x=(T==null?void 0:T.isBlocked)&&!S;return g.jsxs("div",{onClick:()=>!x&&c(v),style:{display:"flex",alignItems:"center",gap:8,padding:"7px 10px",borderRadius:7,background:S?"rgba(34,197,94,0.06)":x?"rgba(139,143,163,0.06)":f.bgCard,border:`1px solid ${S?"rgba(34,197,94,0.15)":x?"rgba(139,143,163,0.15)":f.border}`,cursor:x?"not-allowed":"pointer",opacity:x?.6:1},children:[g.jsx("span",{style:{fontSize:11,fontWeight:700,color:S?"#22c55e":x?f.textDim:"#ef4444",fontFamily:L,minWidth:32,textAlign:"center",background:S?"rgba(34,197,94,0.12)":x?"rgba(139,143,163,0.08)":"rgba(239,68,68,0.12)",padding:"2px 6px",borderRadius:4},children:v.step}),g.jsx("span",{style:{flex:1,fontSize:12,color:f.text,fontWeight:500,opacity:S?.5:1,textDecoration:S?"line-through":"none"},children:v.stepName}),g.jsx("span",{style:{fontSize:10,color:f.textMuted,fontFamily:L},children:v.field}),((D=v.removedParts)==null?void 0:D.length)>0&&v.removedParts.map((R,F)=>{const q=xs[R.disposition]||xs.reuse;return g.jsxs("span",{style:{fontSize:8,fontWeight:700,padding:"2px 6px",borderRadius:4,background:q.bg,color:q.color,fontFamily:L,display:"flex",alignItems:"center",gap:3},children:[q.icon," ",q.label]},F)}),x&&g.jsx("span",{style:{fontSize:11},title:`Blocked by: ${T.cascadeFrom.join(", ")}`,children:""}),g.jsx("span",{style:{fontSize:14,color:S?"#22c55e":f.textDim},children:S?"":""})]},E)})}),a&&g.jsxs("div",{style:{marginTop:12,padding:"14px 16px",borderRadius:10,background:"rgba(34,197,94,0.08)",border:"2px solid rgba(34,197,94,0.3)",display:"flex",alignItems:"center",justifyContent:"space-between",animation:"fadeIn 0.3s"},children:[g.jsxs("div",{children:[g.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#22c55e"},children:[" All ",r.length," changes applied"]}),g.jsxs("div",{style:{fontSize:11,color:f.textMuted,marginTop:2},children:["Ready to upgrade ",n.sn," from v",n.version," to v",n.latestVersion]})]}),g.jsxs("button",{onClick:y,style:{padding:"10px 28px",borderRadius:10,fontSize:14,fontWeight:700,background:"#22c55e",border:"none",color:"#000",cursor:"pointer",boxShadow:"0 4px 20px rgba(34,197,94,0.35)",whiteSpace:"nowrap"},children:[" Upgrade to v",n.latestVersion]})]})]}),g.jsx("div",{style:{padding:"12px 20px 36px",maxWidth:960,margin:"0 auto"},children:d.map(v=>{const E=l.has(v.id),S=v.steps.filter(x=>s.has(x.sn)&&!o.has(`${n.sn}-${x.sn}`)).length,T=h(v);return g.jsxs("div",{style:{marginBottom:2},children:[g.jsxs("div",{onClick:()=>{const x=new Set(l);x.has(v.id)?x.delete(v.id):x.add(v.id),u(x)},style:{display:"flex",alignItems:"center",gap:8,padding:"10px 16px",background:f.bgCard,borderLeft:`3px solid ${v.color}`,cursor:"pointer",borderRight:S>0||T>0?`3px solid ${S>0?"#ef4444":"#f59e0b"}`:"none"},children:[g.jsx("span",{style:{color:f.textMuted,fontSize:11,transform:E?"rotate(90deg)":"rotate(0)",transition:"transform 0.15s"},children:""}),g.jsx("span",{style:{fontSize:15},children:v.icon}),g.jsx("span",{style:{color:v.color,fontWeight:700,fontSize:14,flex:1},children:v.name}),v.level!==null&&g.jsxs("span",{style:{fontSize:9,fontWeight:700,padding:"2px 7px",borderRadius:8,background:`${v.color}20`,color:v.color,fontFamily:L},children:["L",v.level]}),g.jsx("span",{style:{fontSize:11,color:f.textMuted,fontFamily:L},children:v.steps.length}),S>0&&g.jsxs("span",{style:{fontSize:10,fontWeight:700,color:"#ef4444",background:"rgba(239,68,68,0.12)",padding:"2px 7px",borderRadius:6,fontFamily:L},children:[" ",S]}),T>0&&g.jsxs("span",{style:{fontSize:10,fontWeight:700,color:"#f59e0b",background:"rgba(245,158,11,0.12)",padding:"2px 7px",borderRadius:6,fontFamily:L},children:[" ",T]})]}),E&&v.steps.map((x,D)=>{var N;const R=s.has(x.sn),F=R&&o.has(`${n.sn}-${x.sn}`),q=i.get(x.sn),se=(q==null?void 0:q.isCascade)&&!F,Ke=R&&(q==null?void 0:q.isBlocked)&&!F,qe=r.find(C=>C.step===x.sn);let Ge=`${v.color}22`;F?Ge="#22c55e":R&&!F?Ge="#ef4444":se&&(Ge="#f59e0b");let it="transparent";F?it="rgba(34,197,94,0.03)":R&&!F?it="rgba(239,68,68,0.03)":se&&(it="rgba(245,158,11,0.03)");const j=m.dragging&&m.groupId===v.id&&m.stepIdx===D,$=m.dragging&&m.groupId===v.id&&m.overIdx===D;return g.jsxs("div",{draggable:e==="admin",onDragStart:C=>{e==="admin"&&(C.dataTransfer.effectAllowed="move",w(v.id,D))},onDragOver:C=>{e==="admin"&&(C.preventDefault(),C.dataTransfer.dropEffect="move",_(v.id,D))},onDragEnd:e==="admin"?k:void 0,onClick:()=>{R&&!Ke&&c(qe)},style:{display:"flex",alignItems:"center",gap:10,padding:"8px 14px 8px 20px",cursor:e==="admin"?j?"grabbing":"grab":R&&!Ke&&e==="operator"?"pointer":"default",borderLeft:`3px solid ${Ge}`,marginLeft:16,background:it,borderRight:R&&!F&&!Ke?"2px solid rgba(239,68,68,0.25)":se?"2px solid rgba(245,158,11,0.2)":"none",opacity:j?.4:Ke?.5:1,transition:j?"none":"all 0.12s",borderTop:$?"2px solid #f59e0b":"2px solid transparent",position:"relative"},children:[e==="admin"&&g.jsx("span",{style:{fontSize:12,color:f.textDim,cursor:"grab",userSelect:"none",lineHeight:1},title:"Drag to reorder",children:""}),g.jsx("span",{style:{fontFamily:L,fontSize:11,fontWeight:700,color:F?"#22c55e":R?"#ef4444":se?"#f59e0b":v.color,minWidth:32,textAlign:"center",background:F?"rgba(34,197,94,0.15)":R?"rgba(239,68,68,0.15)":se?"rgba(245,158,11,0.12)":`${v.color}15`,padding:"2px 7px",borderRadius:4},children:x.sn}),g.jsx("span",{style:{fontSize:10,fontWeight:600,padding:"2px 7px",borderRadius:4,background:x.type==="PREP"?"rgba(168,85,247,0.15)":"rgba(59,130,246,0.08)",color:x.type==="PREP"?"#a855f7":"#3b82f6",fontFamily:L},children:x.type}),g.jsxs("div",{style:{display:"flex",gap:2,minWidth:36},children:[se&&g.jsx("span",{style:{fontSize:12},title:`Cascade from: ${q.cascadeFrom.join(", ")}`,children:""}),R&&!F&&!Ke&&g.jsx("span",{style:{fontSize:12},children:""}),R&&Ke&&g.jsx("span",{style:{fontSize:11},children:""}),F&&g.jsx("span",{style:{fontSize:12},children:""})]}),g.jsx("span",{style:{flex:1,color:f.text,fontSize:13,fontWeight:500,opacity:F?.5:1},children:x.name}),R&&qe&&!F&&g.jsxs("span",{style:{fontSize:9,color:"#ef4444",fontFamily:L,maxWidth:180,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[qe.old||"","  ",qe.new]}),R&&qe&&!F&&((N=qe.removedParts)==null?void 0:N.length)>0&&qe.removedParts.map((C,U)=>{const z=xs[C.disposition]||xs.reuse;return g.jsxs("span",{style:{fontSize:8,fontWeight:700,padding:"1px 5px",borderRadius:3,background:z.bg,color:z.color,fontFamily:L},children:[z.icon,z.label]},U)}),se&&!R&&g.jsxs("span",{style:{fontSize:9,color:"#f59e0b",fontFamily:L},children:[" cascade from ",q.cascadeFrom.join(", ")]}),se&&!R&&g.jsx("span",{style:{fontSize:8,fontWeight:700,padding:"1px 5px",borderRadius:3,background:"rgba(59,130,246,0.12)",color:"#3b82f6",fontFamily:L},children:"REUSE"}),g.jsxs("div",{style:{display:"flex",gap:4},children:[x.parts>0&&g.jsxs("span",{style:{fontSize:10,fontWeight:700,padding:"2px 6px",borderRadius:4,background:"rgba(34,197,94,0.1)",color:"#22c55e",fontFamily:L},children:[x.parts,"P"]}),x.fasteners>0&&g.jsxs("span",{style:{fontSize:10,fontWeight:700,padding:"2px 6px",borderRadius:4,background:"rgba(239,68,68,0.1)",color:"#ef4444",fontFamily:L},children:[x.fasteners,"F"]})]})]},x.id)})]},v.id)})})]})}function lv({dark:t}){const e=bt(t);return g.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh",gap:16,padding:40},children:[g.jsxs("div",{style:{position:"relative",width:360,height:280},children:[[{x:170,y:20,label:"Prep",color:"#a855f7",size:36},{x:60,y:100,label:"Body",color:"#22c55e",size:36},{x:280,y:100,label:"Motor",color:"#f97316",size:36},{x:60,y:190,label:"Head",color:"#ef4444",size:36},{x:280,y:190,label:"Camera",color:"#3b82f6",size:36},{x:170,y:250,label:"Final",color:"#ec4899",size:36}].map((n,r)=>g.jsx("div",{style:{position:"absolute",left:n.x-n.size/2,top:n.y-n.size/2,width:n.size,height:n.size,borderRadius:"50%",background:`${n.color}20`,border:`2px solid ${n.color}40`,display:"flex",alignItems:"center",justifyContent:"center"},children:g.jsx("span",{style:{fontSize:7,fontWeight:700,color:n.color,fontFamily:L,textAlign:"center"},children:n.label})},r)),g.jsx("svg",{width:"360",height:"280",style:{position:"absolute",top:0,left:0,pointerEvents:"none"},children:[[170,38,60,82],[170,38,280,82],[60,118,60,172],[280,118,280,172],[60,208,170,232],[280,208,170,232]].map(([n,r,s,i],o)=>g.jsx("line",{x1:n,y1:r,x2:s,y2:i,stroke:e.border,strokeWidth:"1.5",strokeDasharray:"4 3",opacity:"0.5"},o))})]}),g.jsxs("div",{style:{textAlign:"center"},children:[g.jsx("div",{style:{fontSize:20,fontWeight:700,color:e.text,marginBottom:6},children:" Graph View"}),g.jsx("div",{style:{fontSize:13,color:e.textMuted,maxWidth:400,lineHeight:1.6},children:"Interactive dependency graph showing assembly step flow, group connections, and ECN impact visualization."}),g.jsx("div",{style:{marginTop:16,display:"flex",gap:8,justifyContent:"center",flexWrap:"wrap"},children:["Drag & zoom nodes","ECN cascade paths","Group clustering","Dependency arrows"].map(n=>g.jsx("span",{style:{fontSize:10,fontWeight:600,padding:"4px 10px",borderRadius:6,background:`${e.accent}10`,color:e.accent,fontFamily:L,border:`1px solid ${e.accent}20`},children:n},n))})]})]})}function uv({dark:t}){const e=bt(t),n=[{title:"Not Started",color:e.textDim,count:12,icon:""},{title:"In Progress",color:"#3b82f6",count:8,icon:""},{title:"Review",color:"#f59e0b",count:3,icon:""},{title:"Complete",color:"#22c55e",count:18,icon:""}];return g.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh",gap:20,padding:40},children:[g.jsx("div",{style:{display:"flex",gap:12,width:"100%",maxWidth:600},children:n.map(r=>g.jsxs("div",{style:{flex:1,background:e.bgCard,borderRadius:10,border:`1px solid ${e.border}`,overflow:"hidden"},children:[g.jsxs("div",{style:{padding:"10px 12px",borderBottom:`1px solid ${e.border}`,display:"flex",alignItems:"center",gap:6,justifyContent:"space-between"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:5},children:[g.jsx("span",{style:{color:r.color,fontSize:10},children:r.icon}),g.jsx("span",{style:{fontSize:10,fontWeight:700,color:r.color},children:r.title})]}),g.jsx("span",{style:{fontSize:9,fontWeight:700,padding:"2px 6px",borderRadius:6,background:`${r.color}15`,color:r.color,fontFamily:L},children:r.count})]}),g.jsxs("div",{style:{padding:8,display:"flex",flexDirection:"column",gap:4},children:[Array.from({length:Math.min(r.count,3)},(s,i)=>g.jsxs("div",{style:{padding:"8px 10px",borderRadius:6,background:e.bg,border:`1px solid ${e.border}`,opacity:.5},children:[g.jsx("div",{style:{width:`${50+Math.random()*40}%`,height:8,borderRadius:4,background:`${r.color}20`}}),g.jsx("div",{style:{width:`${30+Math.random()*30}%`,height:6,borderRadius:3,background:e.border,marginTop:6}})]},i)),r.count>3&&g.jsxs("div",{style:{textAlign:"center",fontSize:9,color:e.textDim,padding:4},children:["+",r.count-3," more"]})]})]},r.title))}),g.jsxs("div",{style:{textAlign:"center"},children:[g.jsx("div",{style:{fontSize:20,fontWeight:700,color:e.text,marginBottom:6},children:" Kanban Board"}),g.jsx("div",{style:{fontSize:13,color:e.textMuted,maxWidth:400,lineHeight:1.6},children:"Track assembly progress per unit with drag-and-drop status columns, ECN alerts, and operator assignment."}),g.jsx("div",{style:{marginTop:16,display:"flex",gap:8,justifyContent:"center",flexWrap:"wrap"},children:["Drag & drop cards","Per-unit tracking","ECN status flags","Operator filters"].map(r=>g.jsx("span",{style:{fontSize:10,fontWeight:600,padding:"4px 10px",borderRadius:6,background:`${e.accent}10`,color:e.accent,fontFamily:L,border:`1px solid ${e.accent}20`},children:r},r))})]})]})}function cv({dark:t,role:e,assemblyType:n,selectedUnits:r,onBack:s}){const i=bt(t),[o,a]=W.useState("list"),[l,u]=W.useState(r[0]),[c,h]=W.useState([]),[d,m]=W.useState(!0),[w,_]=W.useState(!1),[k,y]=W.useState(new Set),[f,p]=W.useState(new Set),[v,E]=W.useState([]),[S,T]=W.useState(null),[x,D]=W.useState([]),[R,F]=W.useState({dragging:!1,groupId:null,stepIdx:null,overIdx:null});W.useEffect(()=>{(async()=>{m(!0);let C=[];if(n.tag){const{supabase:z}=await Eg(async()=>{const{supabase:Se}=await Promise.resolve().then(()=>rv);return{supabase:Se}},void 0),{data:ne}=await z.from("eagle_eye_app_assemblies").select("id").eq("tag",n.tag).single();ne&&(C=await Ih(ne.id))}h(C),_(C.length>0),y(new Set(C.map(z=>z.id)));const U=await wg(n.sheetName);D(U),m(!1)})()},[n.tag,n.sheetName]),W.useEffect(()=>{if(!l)return;const C=l.ecnStatuses||{},U=Object.entries(C).map(([ne,Se])=>({step:ne,stepName:ne,changeType:"ecn",field:"ECN Status",old:"",new:Se.rawValue,reason:"",group:"",disposition:Se.status==="applied"?"applied":"pending",status:Se.status}));E(U);const z=new Set;Object.entries(C).forEach(([ne,Se])=>{Se.status==="applied"&&z.add(`${l.sn}-${ne}`)}),p(z)},[l]);const q=l.pendingEcns>0,se=v.filter(C=>C.status==="pending"),Ke=v.filter(C=>C.status==="applied"),qe=new Set(v.filter(C=>C.status==="pending").map(C=>C.step)),Ge=iv(c,se,f,l.sn),it=se.length===0,j=(C,U)=>F({dragging:!0,groupId:C,stepIdx:U,overIdx:null}),$=(C,U)=>{R.groupId===C&&R.overIdx!==U&&F(z=>({...z,overIdx:U}))},N=async()=>{if(R.groupId&&R.stepIdx!==null&&R.overIdx!==null&&R.stepIdx!==R.overIdx){const C=c.map(z=>{if(z.id!==R.groupId)return z;const ne=[...z.steps],[Se]=ne.splice(R.stepIdx,1);return ne.splice(R.overIdx,0,Se),{...z,steps:ne}});h(C);const U=C.find(z=>z.id===R.groupId);U&&await $h(U.steps)}F({dragging:!1,groupId:null,stepIdx:null,overIdx:null})};return d?g.jsx("div",{style:{minHeight:"100vh",background:i.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:g.jsxs("div",{style:{textAlign:"center",color:i.textMuted},children:[g.jsx("div",{style:{fontSize:32,marginBottom:10},children:""}),g.jsx("div",{style:{fontSize:14},children:"Loading assembly data..."})]})}):g.jsxs("div",{style:{minHeight:"100vh",background:i.bg},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"10px 20px",borderBottom:`1px solid ${i.border}`,background:i.headerBg,position:"sticky",top:0,zIndex:10,flexWrap:"wrap"},children:[g.jsx("button",{onClick:s,style:{background:"none",border:`1px solid ${i.border}`,borderRadius:8,padding:"5px 12px",color:i.textMuted,cursor:"pointer",fontSize:12},children:" Units"}),g.jsx("span",{style:{fontSize:20,fontWeight:800,color:i.accent,fontFamily:L},children:""}),g.jsx("select",{value:l.sn,onChange:C=>u(r.find(U=>U.sn===C.target.value)),style:{background:i.bgCard,color:i.text,border:`1px solid ${i.border}`,borderRadius:8,padding:"7px 28px 7px 10px",fontSize:13,fontWeight:600,cursor:"pointer",appearance:"none",fontFamily:L},children:r.map(C=>g.jsxs("option",{value:C.sn,children:[C.sn," ",C.pendingEcns>0?` ${C.pendingEcns} pending`:""]},C.sn))}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:5,padding:"4px 12px",background:q?"rgba(239,68,68,0.12)":"rgba(34,197,94,0.12)",border:`1px solid ${q?"rgba(239,68,68,0.3)":"rgba(34,197,94,0.3)"}`,borderRadius:18,fontSize:11,fontWeight:700,color:q?"#ef4444":"#22c55e",fontFamily:L},children:[g.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:q?"#ef4444":"#22c55e"}}),q?`${l.pendingEcns} ECN pending`:"All ECN applied"]}),g.jsx("button",{onClick:()=>{mh(n.sheetName),window.location.reload()},style:{marginLeft:"auto",background:"none",border:`1px solid ${i.border}`,borderRadius:8,padding:"5px 10px",color:i.textMuted,cursor:"pointer",fontSize:11,display:"flex",alignItems:"center",gap:3},children:" Refresh"}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:9,color:"#22c55e",fontFamily:L},children:[g.jsx("span",{style:{width:5,height:5,borderRadius:"50%",background:"#22c55e"}}),"SHEETS"]})]}),g.jsxs("div",{style:{padding:"16px 20px",borderBottom:`1px solid ${i.border}`},children:[g.jsxs("div",{style:{fontSize:13,fontWeight:700,color:i.text,marginBottom:10},children:["ECN Status  ",l.sn]}),g.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12,flexWrap:"wrap"},children:[g.jsx(mo,{label:`${Ke.length} Applied`,bg:"rgba(34,197,94,0.12)",color:"#22c55e"}),g.jsx(mo,{label:`${se.length} Pending`,bg:"rgba(239,68,68,0.12)",color:"#ef4444"}),g.jsx(mo,{label:`${v.filter(C=>C.status==="not_required").length} N/A`,bg:`${i.textMuted}15`,color:i.textMuted})]}),g.jsxs("div",{style:{display:"flex",gap:4,flexWrap:"wrap"},children:[v.map((C,U)=>{const z=C.status,ne=z==="applied"?"rgba(34,197,94,0.15)":z==="pending"?"rgba(239,68,68,0.15)":z==="not_required"?`${i.textMuted}10`:"rgba(245,158,11,0.15)",Se=z==="applied"?"#22c55e":z==="pending"?"#ef4444":z==="not_required"?i.textDim:"#f59e0b",ht=z==="applied"?"":z==="pending"?"":z==="not_required"?"":"";return g.jsxs("div",{onClick:()=>T(C),style:{padding:"5px 8px",borderRadius:6,background:ne,cursor:"pointer",minWidth:90,transition:"all 0.1s"},onMouseEnter:Tt=>Tt.currentTarget.style.transform="scale(1.02)",onMouseLeave:Tt=>Tt.currentTarget.style.transform="none",children:[g.jsxs("div",{style:{fontSize:9,fontWeight:700,color:Se,fontFamily:L,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:140},children:[ht," ",C.step.split("\\n")[0].split(" ")[0]]}),g.jsx("div",{style:{fontSize:8,color:i.textDim,marginTop:1},children:C.new||z})]},U)}),v.length===0&&g.jsx("div",{style:{fontSize:12,color:i.textMuted,padding:10},children:"No ECN columns found for this assembly"})]})]}),l.components&&Object.keys(l.components).length>0&&g.jsxs("div",{style:{padding:"12px 20px",borderBottom:`1px solid ${i.border}`,background:`${i.accent}05`},children:[g.jsx("div",{style:{fontSize:11,fontWeight:700,color:i.textMuted,marginBottom:8,textTransform:"uppercase",letterSpacing:.5},children:"Component Traceability"}),g.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:Object.entries(l.components).map(([C,U])=>g.jsxs("div",{style:{padding:"6px 10px",borderRadius:8,background:i.bgCard,border:`1px solid ${i.border}`},children:[g.jsx("div",{style:{fontSize:9,fontWeight:700,color:i.accent},children:C}),g.jsx("div",{style:{fontSize:11,fontFamily:L,color:i.text},children:U})]},C))})]}),w&&g.jsxs(g.Fragment,{children:[g.jsx(ov,{dark:t,activeTab:o,onTabChange:a,ecnCount:se.length,tree:c}),o==="list"&&g.jsx(av,{dark:t,role:e,activeUnit:l,changes:se,ecnStepSet:qe,cascade:Ge,applied:f,allEcnApplied:it,expanded:k,setExpanded:y,setShowModal:T,getGroupCascadeCount:C=>C.steps.filter(U=>{var z;return(z=Ge.get(U.sn))==null?void 0:z.isCascade}).length,tree:c,dragState:R,onDragStart:j,onDragOver:$,onDragEnd:N,onUpgrade:()=>{}}),o==="graph"&&g.jsx(lv,{dark:t}),o==="kanban"&&g.jsx(uv,{dark:t})]}),!w&&g.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:i.textMuted},children:[g.jsxs("div",{style:{fontSize:14,marginBottom:6},children:["Assembly tree not yet configured in Supabase for ",g.jsx("span",{style:{color:i.accent,fontFamily:L},children:n.tag})]}),g.jsx("div",{style:{fontSize:12},children:"ECN tracking above is live from Google Sheets. Tree view will be available once assembly steps are added."})]}),S&&g.jsx("div",{onClick:()=>T(null),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:20},children:g.jsxs("div",{onClick:C=>C.stopPropagation(),style:{background:i.bgCard,borderRadius:16,padding:24,maxWidth:480,width:"100%",border:`1px solid ${i.border}`,maxHeight:"80vh",overflow:"auto"},children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[g.jsx("div",{style:{fontSize:16,fontWeight:700,color:i.text},children:"ECN Detail"}),g.jsx("button",{onClick:()=>T(null),style:{background:"none",border:"none",color:i.textMuted,fontSize:18,cursor:"pointer"},children:""})]}),g.jsxs("div",{style:{marginBottom:12},children:[g.jsx("div",{style:{fontSize:12,fontWeight:700,color:i.accent,fontFamily:L,marginBottom:4},children:S.step}),g.jsx("div",{style:{fontSize:12,color:i.text,lineHeight:1.5},children:S.stepName})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[g.jsxs("div",{style:{padding:"10px 12px",borderRadius:8,background:i.bg},children:[g.jsx("div",{style:{fontSize:10,color:i.textMuted,marginBottom:2},children:"Status"}),g.jsx("div",{style:{fontSize:13,fontWeight:700,color:S.status==="applied"?"#22c55e":S.status==="pending"?"#ef4444":"#f59e0b"},children:S.status==="applied"?" Applied":S.status==="pending"?" Pending":S.status==="not_required"?" N/A":" "+S.status})]}),g.jsxs("div",{style:{padding:"10px 12px",borderRadius:8,background:i.bg},children:[g.jsx("div",{style:{fontSize:10,color:i.textMuted,marginBottom:2},children:"Raw Value"}),g.jsx("div",{style:{fontSize:12,fontFamily:L,color:i.text},children:S.new||""})]})]}),g.jsx("div",{style:{marginTop:12,fontSize:11,color:i.textMuted,fontStyle:"italic"},children:"Data source: Google Sheets (live)  edit the spreadsheet to update."})]})})]})}function mo({label:t,bg:e,color:n}){return g.jsx("span",{style:{fontSize:10,fontWeight:700,padding:"3px 10px",borderRadius:8,background:e,color:n},children:t})}function dv({dark:t,onBack:e}){const n=bt(t);return g.jsxs("div",{style:{padding:"48px 24px",textAlign:"center"},children:[g.jsx("button",{onClick:e,style:{background:"none",border:`1px solid ${n.border}`,borderRadius:8,padding:"6px 14px",color:n.textMuted,cursor:"pointer",fontSize:13,marginBottom:24},children:" Back to Home"}),g.jsx("div",{style:{fontSize:24,fontWeight:700,color:"#8b5cf6"},children:" Tree Editor"}),g.jsx("div",{style:{fontSize:13,color:n.textMuted,marginTop:8},children:"Side-by-side version comparison editor  coming soon"})]})}function hv(){const[t,e]=W.useState(!0),[n,r]=W.useState("admin"),[s,i]=W.useState("home"),[o,a]=W.useState(null),[l,u]=W.useState([]),c=bt(t);return g.jsxs("div",{style:{minHeight:"100vh",background:c.bg,color:c.text,fontFamily:ph,transition:"background 0.2s, color 0.2s"},children:[g.jsxs("div",{style:{position:"fixed",top:12,right:12,zIndex:50,display:"flex",gap:6},children:[g.jsx("select",{value:n,onChange:h=>r(h.target.value),style:{background:c.bgCard,color:ju[n].color,border:`1px solid ${c.border}`,borderRadius:8,padding:"5px 10px",fontSize:11,fontWeight:700,cursor:"pointer",fontFamily:L},children:Object.entries(ju).map(([h,d])=>g.jsxs("option",{value:h,children:[d.icon," ",d.label]},h))}),g.jsx("button",{onClick:()=>e(!t),style:{background:c.bgCard,border:`1px solid ${c.border}`,borderRadius:8,padding:"5px 10px",cursor:"pointer",color:c.text,fontSize:14,display:"flex",alignItems:"center",gap:4},children:t?"":""})]}),s==="home"&&g.jsx(Sg,{dark:t,role:n,onSelectType:h=>{a(h),i("units")},onGoAdmin:()=>i("admin")}),s==="units"&&o&&g.jsx(kg,{dark:t,assemblyType:o,onBack:()=>i("home"),onProceed:h=>{u(h),i("assembly")}}),s==="assembly"&&g.jsx(cv,{dark:t,role:n,assemblyType:o,selectedUnits:l,onBack:()=>i("units")}),s==="admin"&&g.jsx(dv,{dark:t,onBack:()=>i("home")})]})}yo.createRoot(document.getElementById("root")).render(g.jsx(Yh.StrictMode,{children:g.jsx(hv,{})}));
